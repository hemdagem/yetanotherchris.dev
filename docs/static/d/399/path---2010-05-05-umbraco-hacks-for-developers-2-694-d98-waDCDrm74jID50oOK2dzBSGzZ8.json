{"data":{"site":{"siteMetadata":{"title":"Another Chris","author":"Chris Small"}},"markdownRemark":{"id":"a710dadd-4737-5ff5-a6d9-a206f4ae4e97","excerpt":"A lot of the tips here are relevant for Umbraco 3.0, issues such as the debug builds have been resolved in 4.0 Sitemap XSLT The XSL below is the source used for…","html":"<p>A lot of the tips here are relevant for Umbraco 3.0, issues such as the debug builds have been resolved in 4.0</p>\n<!--more-->\n<h3>Sitemap XSLT</h3>\n<p>The XSL below is the source used for Sitemap on sloppycode.net. It’s taken from the Umbraco book, and modified to display the Dublin Core description alongside each page’s url.</p>\n<p><div id=\"gist4956647\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-gistfile1-xslt\" class=\"file\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-xslt \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\">\n      <tr>\n        <td id=\"file-gistfile1-xslt-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-gistfile1-xslt-LC1\" class=\"blob-code blob-code-inner js-file-line\">&lt;?<span class=\"pl-ent\">xml</span><span class=\"pl-e\"> version</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>1.0<span class=\"pl-pds\">&quot;</span></span><span class=\"pl-e\"> encoding</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>UTF-8<span class=\"pl-pds\">&quot;</span></span>?&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-gistfile1-xslt-LC2\" class=\"blob-code blob-code-inner js-file-line\">&lt;!<span class=\"pl-ent\">DOCTYPE</span> <span class=\"pl-e\">xsl:stylesheet</span> [</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-gistfile1-xslt-LC3\" class=\"blob-code blob-code-inner js-file-line\">\t&lt;!<span class=\"pl-k\">ENTITY</span> <span class=\"pl-c1\">nbsp</span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span> <span class=\"pl-pds\">&quot;</span></span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-gistfile1-xslt-LC4\" class=\"blob-code blob-code-inner js-file-line\">]&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-gistfile1-xslt-LC5\" class=\"blob-code blob-code-inner js-file-line\">&lt;<span class=\"pl-ent\">xsl</span><span class=\"pl-ent\">:</span><span class=\"pl-ent\">stylesheet</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-gistfile1-xslt-LC6\" class=\"blob-code blob-code-inner js-file-line\">version=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>1.0<span class=\"pl-pds\">&quot;</span></span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-gistfile1-xslt-LC7\" class=\"blob-code blob-code-inner js-file-line\">xmlns:xsl=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>http://www.w3.org/1999/XSL/Transform<span class=\"pl-pds\">&quot;</span></span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-gistfile1-xslt-LC8\" class=\"blob-code blob-code-inner js-file-line\">xmlns:msxml=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>urn:schemas-microsoft-com:xslt<span class=\"pl-pds\">&quot;</span></span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-gistfile1-xslt-LC9\" class=\"blob-code blob-code-inner js-file-line\">xmlns:umbraco.library=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>urn:umbraco.library<span class=\"pl-pds\">&quot;</span></span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-gistfile1-xslt-LC10\" class=\"blob-code blob-code-inner js-file-line\">exclude-result-prefixes=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>msxml umbraco.library<span class=\"pl-pds\">&quot;</span></span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-gistfile1-xslt-LC11\" class=\"blob-code blob-code-inner js-file-line\">\t&lt;<span class=\"pl-ent\">xsl</span><span class=\"pl-ent\">:</span><span class=\"pl-ent\">output</span> <span class=\"pl-e\">method</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>xml<span class=\"pl-pds\">&quot;</span></span> <span class=\"pl-e\">omit-xml-declaration</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>yes<span class=\"pl-pds\">&quot;</span></span>/&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L12\" class=\"blob-num js-line-number\" data-line-number=\"12\"></td>\n        <td id=\"file-gistfile1-xslt-LC12\" class=\"blob-code blob-code-inner js-file-line\">\t&lt;<span class=\"pl-ent\">xsl</span><span class=\"pl-ent\">:</span><span class=\"pl-ent\">param</span> <span class=\"pl-e\">name</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>currentPage<span class=\"pl-pds\">&quot;</span></span>/&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L13\" class=\"blob-num js-line-number\" data-line-number=\"13\"></td>\n        <td id=\"file-gistfile1-xslt-LC13\" class=\"blob-code blob-code-inner js-file-line\">\t<span class=\"pl-c\"><span class=\"pl-c\">&lt;!--</span> update this variable on how deep your site map should be <span class=\"pl-c\">--&gt;</span></span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L14\" class=\"blob-num js-line-number\" data-line-number=\"14\"></td>\n        <td id=\"file-gistfile1-xslt-LC14\" class=\"blob-code blob-code-inner js-file-line\">\t&lt;<span class=\"pl-ent\">xsl</span><span class=\"pl-ent\">:</span><span class=\"pl-ent\">variable</span> <span class=\"pl-e\">name</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>maxLevelForSitemap<span class=\"pl-pds\">&quot;</span></span> <span class=\"pl-e\">select</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>4<span class=\"pl-pds\">&quot;</span></span>/&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L15\" class=\"blob-num js-line-number\" data-line-number=\"15\"></td>\n        <td id=\"file-gistfile1-xslt-LC15\" class=\"blob-code blob-code-inner js-file-line\">\t&lt;<span class=\"pl-ent\">xsl</span><span class=\"pl-ent\">:</span><span class=\"pl-ent\">template</span> <span class=\"pl-e\">match</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>/<span class=\"pl-pds\">&quot;</span></span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L16\" class=\"blob-num js-line-number\" data-line-number=\"16\"></td>\n        <td id=\"file-gistfile1-xslt-LC16\" class=\"blob-code blob-code-inner js-file-line\">\t\t&lt;<span class=\"pl-ent\">div</span> <span class=\"pl-e\">id</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>sitemap<span class=\"pl-pds\">&quot;</span></span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L17\" class=\"blob-num js-line-number\" data-line-number=\"17\"></td>\n        <td id=\"file-gistfile1-xslt-LC17\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t&lt;<span class=\"pl-ent\">xsl</span><span class=\"pl-ent\">:</span><span class=\"pl-ent\">call-template</span> <span class=\"pl-e\">name</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>drawNodes<span class=\"pl-pds\">&quot;</span></span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L18\" class=\"blob-num js-line-number\" data-line-number=\"18\"></td>\n        <td id=\"file-gistfile1-xslt-LC18\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t&lt;<span class=\"pl-ent\">xsl</span><span class=\"pl-ent\">:</span><span class=\"pl-ent\">with-param</span> <span class=\"pl-e\">name</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>parent<span class=\"pl-pds\">&quot;</span></span> <span class=\"pl-e\">select</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>$currentPage/ancestor-or-self::node [@level=1]<span class=\"pl-pds\">&quot;</span></span>/&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L19\" class=\"blob-num js-line-number\" data-line-number=\"19\"></td>\n        <td id=\"file-gistfile1-xslt-LC19\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t&lt;/<span class=\"pl-ent\">xsl</span><span class=\"pl-ent\">:</span><span class=\"pl-ent\">call-template</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L20\" class=\"blob-num js-line-number\" data-line-number=\"20\"></td>\n        <td id=\"file-gistfile1-xslt-LC20\" class=\"blob-code blob-code-inner js-file-line\">\t\t&lt;/<span class=\"pl-ent\">div</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L21\" class=\"blob-num js-line-number\" data-line-number=\"21\"></td>\n        <td id=\"file-gistfile1-xslt-LC21\" class=\"blob-code blob-code-inner js-file-line\">\t&lt;/<span class=\"pl-ent\">xsl</span><span class=\"pl-ent\">:</span><span class=\"pl-ent\">template</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L22\" class=\"blob-num js-line-number\" data-line-number=\"22\"></td>\n        <td id=\"file-gistfile1-xslt-LC22\" class=\"blob-code blob-code-inner js-file-line\">\t&lt;<span class=\"pl-ent\">xsl</span><span class=\"pl-ent\">:</span><span class=\"pl-ent\">template</span> <span class=\"pl-e\">name</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>drawNodes<span class=\"pl-pds\">&quot;</span></span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L23\" class=\"blob-num js-line-number\" data-line-number=\"23\"></td>\n        <td id=\"file-gistfile1-xslt-LC23\" class=\"blob-code blob-code-inner js-file-line\">\t\t&lt;<span class=\"pl-ent\">xsl</span><span class=\"pl-ent\">:</span><span class=\"pl-ent\">param</span> <span class=\"pl-e\">name</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>parent<span class=\"pl-pds\">&quot;</span></span>/&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L24\" class=\"blob-num js-line-number\" data-line-number=\"24\"></td>\n        <td id=\"file-gistfile1-xslt-LC24\" class=\"blob-code blob-code-inner js-file-line\">\t\t&lt;<span class=\"pl-ent\">ul</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L25\" class=\"blob-num js-line-number\" data-line-number=\"25\"></td>\n        <td id=\"file-gistfile1-xslt-LC25\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t&lt;<span class=\"pl-ent\">xsl</span><span class=\"pl-ent\">:</span><span class=\"pl-ent\">for-each</span> <span class=\"pl-e\">select</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>$parent/node [string(./data [@alias=&#39;umbracoNaviHide&#39;]) != &#39;1&#39; and @level<span class=\"pl-pds\">&quot;</span></span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L26\" class=\"blob-num js-line-number\" data-line-number=\"26\"></td>\n        <td id=\"file-gistfile1-xslt-LC26\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t&lt;= $maxLevelForSitemap]<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>&gt;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L27\" class=\"blob-num js-line-number\" data-line-number=\"27\"></td>\n        <td id=\"file-gistfile1-xslt-LC27\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-s\">\t\t\t\t&lt;li&gt;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L28\" class=\"blob-num js-line-number\" data-line-number=\"28\"></td>\n        <td id=\"file-gistfile1-xslt-LC28\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-s\">\t\t\t\t\t&lt;a href=<span class=\"pl-pds\">&quot;</span></span>{umbraco.library:NiceUrl(@id)}<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>&gt;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L29\" class=\"blob-num js-line-number\" data-line-number=\"29\"></td>\n        <td id=\"file-gistfile1-xslt-LC29\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-s\">\t\t\t\t\t\t&lt;xsl:value-of select=<span class=\"pl-pds\">&quot;</span></span>@nodeName<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>/&gt;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L30\" class=\"blob-num js-line-number\" data-line-number=\"30\"></td>\n        <td id=\"file-gistfile1-xslt-LC30\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-s\">\t\t\t\t\t&lt;/a&gt; - &lt;xsl:value-of select=<span class=\"pl-pds\">&quot;</span></span>./data[@alias=<span class=\"pl-s\"><span class=\"pl-pds\">&#39;</span>dcDescription<span class=\"pl-pds\">&#39;</span></span>]<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>/&gt;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L31\" class=\"blob-num js-line-number\" data-line-number=\"31\"></td>\n        <td id=\"file-gistfile1-xslt-LC31\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-s\">\t\t\t\t\t&lt;xsl:if test=<span class=\"pl-pds\">&quot;</span></span>count(./node [string(./data [@alias=<span class=\"pl-s\"><span class=\"pl-pds\">&#39;</span>umbracoNaviHide<span class=\"pl-pds\">&#39;</span></span>]) != <span class=\"pl-s\"><span class=\"pl-pds\">&#39;</span>1<span class=\"pl-pds\">&#39;</span></span> and @level<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span></span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L32\" class=\"blob-num js-line-number\" data-line-number=\"32\"></td>\n        <td id=\"file-gistfile1-xslt-LC32\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-s\">\t\t\t\t\t\t&lt;= $maxLevelForSitemap]) &gt; 0<span class=\"pl-pds\">&quot;</span></span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L33\" class=\"blob-num js-line-number\" data-line-number=\"33\"></td>\n        <td id=\"file-gistfile1-xslt-LC33\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t\t\t&lt;<span class=\"pl-ent\">xsl</span><span class=\"pl-ent\">:</span><span class=\"pl-ent\">call-template</span> <span class=\"pl-e\">name</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>drawNodes<span class=\"pl-pds\">&quot;</span></span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L34\" class=\"blob-num js-line-number\" data-line-number=\"34\"></td>\n        <td id=\"file-gistfile1-xslt-LC34\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t\t\t\t&lt;<span class=\"pl-ent\">xsl</span><span class=\"pl-ent\">:</span><span class=\"pl-ent\">with-param</span> <span class=\"pl-e\">name</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>parent<span class=\"pl-pds\">&quot;</span></span> <span class=\"pl-e\">select</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>.<span class=\"pl-pds\">&quot;</span></span>/&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L35\" class=\"blob-num js-line-number\" data-line-number=\"35\"></td>\n        <td id=\"file-gistfile1-xslt-LC35\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t\t\t&lt;/<span class=\"pl-ent\">xsl</span><span class=\"pl-ent\">:</span><span class=\"pl-ent\">call-template</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L36\" class=\"blob-num js-line-number\" data-line-number=\"36\"></td>\n        <td id=\"file-gistfile1-xslt-LC36\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t\t&lt;/<span class=\"pl-ent\">xsl</span><span class=\"pl-ent\">:</span><span class=\"pl-ent\">if</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L37\" class=\"blob-num js-line-number\" data-line-number=\"37\"></td>\n        <td id=\"file-gistfile1-xslt-LC37\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t&lt;/<span class=\"pl-ent\">li</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L38\" class=\"blob-num js-line-number\" data-line-number=\"38\"></td>\n        <td id=\"file-gistfile1-xslt-LC38\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t&lt;/<span class=\"pl-ent\">xsl</span><span class=\"pl-ent\">:</span><span class=\"pl-ent\">for-each</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L39\" class=\"blob-num js-line-number\" data-line-number=\"39\"></td>\n        <td id=\"file-gistfile1-xslt-LC39\" class=\"blob-code blob-code-inner js-file-line\">\t\t&lt;/<span class=\"pl-ent\">ul</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L40\" class=\"blob-num js-line-number\" data-line-number=\"40\"></td>\n        <td id=\"file-gistfile1-xslt-LC40\" class=\"blob-code blob-code-inner js-file-line\">\t&lt;/<span class=\"pl-ent\">xsl</span><span class=\"pl-ent\">:</span><span class=\"pl-ent\">template</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xslt-L41\" class=\"blob-num js-line-number\" data-line-number=\"41\"></td>\n        <td id=\"file-gistfile1-xslt-LC41\" class=\"blob-code blob-code-inner js-file-line\">&lt;/<span class=\"pl-ent\">xsl</span><span class=\"pl-ent\">:</span><span class=\"pl-ent\">stylesheet</span>&gt;</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/yetanotherchris/4956647/raw/84a74a7b28de6e79f5ecfdfa403a4751ff311ce9/gistfile1.xslt\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/yetanotherchris/4956647#file-gistfile1-xslt\">gistfile1.xslt</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<h3>Changing the content type of a document</h3>\n<p>I’ve had to do this quite often on sloppycode.net when I realised I’ve created something as a Textpage (a built in document type) but then need some code highlighting which comes from a different content type.<br>\nI haven’t got round to making a tool to do it, but it’s simple to do when access to SQL Enterprise Manager/Management Studio.</p>\n<p>First of all, backup the content of the document you are going to change. This is important, as changing the content type wipes the content. I don’t know why, the developers will know the reason for that. But the bodyText and the properties dissapear. Changing the contentType is straight forward, simply run</p>\n<pre>UPDATE cmsContent SET contentType={Your ContentTypeID} WHERE nodeId={Your document ID}</pre>\n<p>in SQL Server Management studio. You can get a list of contentTypes from the contentType table. nodeId holds the ID (rather than the pk column).</p>\n<p>Once you have done this, publish your document. It will probably show a null reference exception when you click on the node in the editor. This will go once it has been published.</p>\n<h3>Moving multiple documents</h3>\n<p>If you need to move a lot of documents at once to a new parent, it’s painful doing it inside the editor. A SQL Script for doing this is below, just change the @oldParentId and @ParentId accordingly. Make sure you backup your database first.</p>\n<p><div id=\"gist4956634\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-gistfile1-sql\" class=\"file\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-plpgsql \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\">\n      <tr>\n        <td id=\"file-gistfile1-sql-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-gistfile1-sql-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">--</span>drop table #temp</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-sql-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-gistfile1-sql-LC2\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">set</span> nocount <span class=\"pl-k\">on</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-sql-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-gistfile1-sql-LC3\" class=\"blob-code blob-code-inner js-file-line\">declare @OldParentId <span class=\"pl-k\">int</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-sql-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-gistfile1-sql-LC4\" class=\"blob-code blob-code-inner js-file-line\">declare @ParentId <span class=\"pl-k\">int</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-sql-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-gistfile1-sql-LC5\" class=\"blob-code blob-code-inner js-file-line\">declare @Id <span class=\"pl-k\">int</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-sql-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-gistfile1-sql-LC6\" class=\"blob-code blob-code-inner js-file-line\">declare @<span class=\"pl-k\">Path</span> nvarchar(<span class=\"pl-c1\">150</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-sql-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-gistfile1-sql-LC7\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">select</span> @OldParentId <span class=\"pl-k\">=</span> <span class=\"pl-c1\">1139</span> <span class=\"pl-c\"><span class=\"pl-c\">--</span> Set to the existing parent node</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-sql-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-gistfile1-sql-LC8\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">select</span> @ParentId <span class=\"pl-k\">=</span> <span class=\"pl-c1\">2457</span> <span class=\"pl-c\"><span class=\"pl-c\">--</span> Set to the new parent node</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-sql-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-gistfile1-sql-LC9\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-sql-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-gistfile1-sql-LC10\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">--</span> First update the parentid column</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-sql-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-gistfile1-sql-LC11\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">update</span> umbracoNode <span class=\"pl-k\">set</span> parentid<span class=\"pl-k\">=</span>@ParentId <span class=\"pl-k\">where</span> parentId<span class=\"pl-k\">=</span>@OldParentId</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-sql-L12\" class=\"blob-num js-line-number\" data-line-number=\"12\"></td>\n        <td id=\"file-gistfile1-sql-LC12\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-sql-L13\" class=\"blob-num js-line-number\" data-line-number=\"13\"></td>\n        <td id=\"file-gistfile1-sql-LC13\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">--</span> Next update all the path columns for the children.</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-sql-L14\" class=\"blob-num js-line-number\" data-line-number=\"14\"></td>\n        <td id=\"file-gistfile1-sql-LC14\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">SELECT</span> id,[<span class=\"pl-k\">path</span>] into <span class=\"pl-c\"><span class=\"pl-c\">#</span>temp FROM [umbracoNode] where parentid=@ParentId</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-sql-L15\" class=\"blob-num js-line-number\" data-line-number=\"15\"></td>\n        <td id=\"file-gistfile1-sql-LC15\" class=\"blob-code blob-code-inner js-file-line\">while exists(<span class=\"pl-k\">select</span> Id <span class=\"pl-k\">from</span> <span class=\"pl-c\"><span class=\"pl-c\">#</span>temp)</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-sql-L16\" class=\"blob-num js-line-number\" data-line-number=\"16\"></td>\n        <td id=\"file-gistfile1-sql-LC16\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">begin</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-sql-L17\" class=\"blob-num js-line-number\" data-line-number=\"17\"></td>\n        <td id=\"file-gistfile1-sql-LC17\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">select</span> @Id<span class=\"pl-k\">=</span>Id,@<span class=\"pl-k\">Path</span><span class=\"pl-k\">=</span>[<span class=\"pl-k\">Path</span>] <span class=\"pl-k\">from</span> <span class=\"pl-c\"><span class=\"pl-c\">#</span>temp</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-sql-L18\" class=\"blob-num js-line-number\" data-line-number=\"18\"></td>\n        <td id=\"file-gistfile1-sql-LC18\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">select</span> @<span class=\"pl-k\">Path</span> <span class=\"pl-k\">=</span> REPLACE(@<span class=\"pl-k\">Path</span>,@OldParentId,@ParentId)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-sql-L19\" class=\"blob-num js-line-number\" data-line-number=\"19\"></td>\n        <td id=\"file-gistfile1-sql-LC19\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">update</span> umbracoNode <span class=\"pl-k\">set</span> <span class=\"pl-k\">path</span><span class=\"pl-k\">=</span>@<span class=\"pl-k\">Path</span> <span class=\"pl-k\">where</span> id<span class=\"pl-k\">=</span>@Id</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-sql-L20\" class=\"blob-num js-line-number\" data-line-number=\"20\"></td>\n        <td id=\"file-gistfile1-sql-LC20\" class=\"blob-code blob-code-inner js-file-line\">print cast(@Id <span class=\"pl-k\">as</span> <span class=\"pl-k\">varchar</span>)<span class=\"pl-k\">+</span><span class=\"pl-s\"><span class=\"pl-pds\">&#39;</span>: <span class=\"pl-pds\">&#39;</span></span> <span class=\"pl-k\">+</span>@<span class=\"pl-k\">Path</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-sql-L21\" class=\"blob-num js-line-number\" data-line-number=\"21\"></td>\n        <td id=\"file-gistfile1-sql-LC21\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">delete</span> <span class=\"pl-k\">from</span> <span class=\"pl-c\"><span class=\"pl-c\">#</span>temp where Id=@Id</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-sql-L22\" class=\"blob-num js-line-number\" data-line-number=\"22\"></td>\n        <td id=\"file-gistfile1-sql-LC22\" class=\"blob-code blob-code-inner js-file-line\">end</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/yetanotherchris/4956634/raw/9c2e3f3b76fb0864bc1bf2485e8dce03ae3ad6dc/gistfile1.sql\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/yetanotherchris/4956634#file-gistfile1-sql\">gistfile1.sql</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<h3>Performance issues with Umbraco</h3>\n<p>Since installing Umbraco and running sloppycode.net on it since December 2006 I’ve noticed a few ways of making it go faster. Most of them are out of the box with Umbraco, like using the XML cache however there’s a few others worth a mention:</p>\n<h4>Truncate your umbracoLog table regularly</h4>\n<p>The table contains all exceptions and warnings plus a host of other information from the Umbraco system. Most of this you don’t need and can clog up the database. The table can grow very large quickly, particularly if you’re creating the website for the first time and testing. This image shows an example</p>\n<p><img src=\"/assets/2010/05/umbracotables.gif\" alt=\"umbraco tables\"></p>\n<p>Before this the site was 500,000 records strong before I noticed. The backups become large too. So simply run truncate on it:</p>\n<pre>TRUNCATE TABLE [dbo].umbracoLog</pre>\n<p>There’s not point saving the deletes to the transcation log with DELETE FROM, as the data is never used by Umbraco except for your information.</p>\n<h4>Make sure tracing and debug is turned off</h4>\n<p>Find the following lines in your web.config file and make sure the attributes are set to false, it makes a noticeable difference:</p>\n<pre>&lt;trace enabled=\"false\" requestLimit=\"10\" pageOutput=\"false\" traceMode=\"SortByTime\" localOnly=\"true\" /&gt;\n...\n&lt;compilation defaultLanguage=\"c#\" debug=\"false\"&gt;\n...\n&lt;add key=\"umbracoDebugMode\" value=\"false\" /&gt;\n</pre>\n<h3>GZip your HTML output</h3>\n<p>I’ve written a small HttpModule based on some code by Bart De Smet that’s very simple to install. It GZIP’s your HTML output, reducing the bandwidth your site uses and page load time. It’s aimed at people using shared hosting or pre-IIS 5 servers.</p>\n<h3>Changing templates on multiple documents</h3>\n<p>Like moving lots of documents at once, this is also a pain in the editor. The code below (for version 3.03) does this for you. You’ll need to turn it into a webservice and make a calling application to use it.</p>\n<p><div id=\"gist4956622\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-gistfile1-cs\" class=\"file\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-c \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\">\n      <tr>\n        <td id=\"file-gistfile1-cs-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-gistfile1-cs-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-en\">System</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-gistfile1-cs-LC2\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-en\">System</span>.<span class=\"pl-en\">Web</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-gistfile1-cs-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-en\">System</span>.<span class=\"pl-en\">Web</span>.<span class=\"pl-en\">Services</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-gistfile1-cs-LC4\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-en\">System</span>.<span class=\"pl-en\">Collections</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-gistfile1-cs-LC5\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-en\">System</span>.<span class=\"pl-en\">Web</span>.<span class=\"pl-en\">Services</span>.<span class=\"pl-en\">Protocols</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-gistfile1-cs-LC6\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-en\">umbraco</span>.<span class=\"pl-en\">cms</span>.<span class=\"pl-en\">businesslogic</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-gistfile1-cs-LC7\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-en\">umbraco</span>.<span class=\"pl-en\">cms</span>.<span class=\"pl-en\">businesslogic</span>.<span class=\"pl-en\">web</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-gistfile1-cs-LC8\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-en\">umbraco</span>.<span class=\"pl-en\">BusinessLogic</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-gistfile1-cs-LC9\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-en\">System</span>.<span class=\"pl-en\">Xml</span>.<span class=\"pl-en\">Serialization</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-gistfile1-cs-LC10\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-en\">umbraco</span>.<span class=\"pl-en\">cms</span>.<span class=\"pl-en\">businesslogic</span>.<span class=\"pl-en\">property</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-gistfile1-cs-LC11\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-en\">umbraco</span>.<span class=\"pl-en\">cms</span>.<span class=\"pl-en\">businesslogic</span>.<span class=\"pl-en\">macro</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L12\" class=\"blob-num js-line-number\" data-line-number=\"12\"></td>\n        <td id=\"file-gistfile1-cs-LC12\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L13\" class=\"blob-num js-line-number\" data-line-number=\"13\"></td>\n        <td id=\"file-gistfile1-cs-LC13\" class=\"blob-code blob-code-inner js-file-line\">[<span class=\"pl-en\">WebService</span>(<span class=\"pl-en\">Namespace</span> <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>http://tempuri.org/<span class=\"pl-pds\">&quot;</span></span>)]</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L14\" class=\"blob-num js-line-number\" data-line-number=\"14\"></td>\n        <td id=\"file-gistfile1-cs-LC14\" class=\"blob-code blob-code-inner js-file-line\">[<span class=\"pl-en\">WebServiceBinding</span>(<span class=\"pl-en\">ConformsTo</span> <span class=\"pl-k\">=</span> <span class=\"pl-smi\">WsiProfiles</span>.<span class=\"pl-smi\">BasicProfile1_1</span>)]</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L15\" class=\"blob-num js-line-number\" data-line-number=\"15\"></td>\n        <td id=\"file-gistfile1-cs-LC15\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">public</span> <span class=\"pl-k\">class</span> <span class=\"pl-en\">YourWebservice</span> : <span class=\"pl-k\">System</span>.<span class=\"pl-k\">Web</span>.<span class=\"pl-k\">Services</span>.<span class=\"pl-en\">WebService</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L16\" class=\"blob-num js-line-number\" data-line-number=\"16\"></td>\n        <td id=\"file-gistfile1-cs-LC16\" class=\"blob-code blob-code-inner js-file-line\">{</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L17\" class=\"blob-num js-line-number\" data-line-number=\"17\"></td>\n        <td id=\"file-gistfile1-cs-LC17\" class=\"blob-code blob-code-inner js-file-line\">\t[<span class=\"pl-en\">WebMethod</span>]</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L18\" class=\"blob-num js-line-number\" data-line-number=\"18\"></td>\n        <td id=\"file-gistfile1-cs-LC18\" class=\"blob-code blob-code-inner js-file-line\">\t<span class=\"pl-k\">public</span> <span class=\"pl-k\">void</span> <span class=\"pl-en\">UpdateDocumentParent</span>(<span class=\"pl-k\">int</span> <span class=\"pl-smi\">docId</span>, <span class=\"pl-k\">int</span> <span class=\"pl-smi\">parentId</span>, <span class=\"pl-k\">bool</span> <span class=\"pl-smi\">deep</span>, <span class=\"pl-k\">int</span> <span class=\"pl-smi\">templateId</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L19\" class=\"blob-num js-line-number\" data-line-number=\"19\"></td>\n        <td id=\"file-gistfile1-cs-LC19\" class=\"blob-code blob-code-inner js-file-line\">\t{</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L20\" class=\"blob-num js-line-number\" data-line-number=\"20\"></td>\n        <td id=\"file-gistfile1-cs-LC20\" class=\"blob-code blob-code-inner js-file-line\">\t\t<span class=\"pl-k\">if</span> (<span class=\"pl-smi\">deep</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L21\" class=\"blob-num js-line-number\" data-line-number=\"21\"></td>\n        <td id=\"file-gistfile1-cs-LC21\" class=\"blob-code blob-code-inner js-file-line\">\t\t{</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L22\" class=\"blob-num js-line-number\" data-line-number=\"22\"></td>\n        <td id=\"file-gistfile1-cs-LC22\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t<span class=\"pl-en\">ArrayList</span> <span class=\"pl-smi\">list</span> <span class=\"pl-k\">=</span> <span class=\"pl-k\">this</span>.<span class=\"pl-en\">GetDocumentChildren</span>(<span class=\"pl-smi\">docId</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L23\" class=\"blob-num js-line-number\" data-line-number=\"23\"></td>\n        <td id=\"file-gistfile1-cs-LC23\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t<span class=\"pl-k\">for</span> (<span class=\"pl-k\">int</span> <span class=\"pl-smi\">i</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">0</span>; <span class=\"pl-smi\">i</span> <span class=\"pl-k\">&lt;</span> <span class=\"pl-smi\">list</span>.<span class=\"pl-smi\">Count</span>; <span class=\"pl-smi\">i</span><span class=\"pl-k\">++</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L24\" class=\"blob-num js-line-number\" data-line-number=\"24\"></td>\n        <td id=\"file-gistfile1-cs-LC24\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t{</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L25\" class=\"blob-num js-line-number\" data-line-number=\"25\"></td>\n        <td id=\"file-gistfile1-cs-LC25\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t<span class=\"pl-k\">if</span> (<span class=\"pl-smi\">list</span>[<span class=\"pl-smi\">i</span>] <span class=\"pl-k\">is</span> <span class=\"pl-en\">Document</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L26\" class=\"blob-num js-line-number\" data-line-number=\"26\"></td>\n        <td id=\"file-gistfile1-cs-LC26\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t{</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L27\" class=\"blob-num js-line-number\" data-line-number=\"27\"></td>\n        <td id=\"file-gistfile1-cs-LC27\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t\t<span class=\"pl-k\">int</span> <span class=\"pl-smi\">n</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L28\" class=\"blob-num js-line-number\" data-line-number=\"28\"></td>\n        <td id=\"file-gistfile1-cs-LC28\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t\t<span class=\"pl-smi\">int</span>.<span class=\"pl-en\">TryParse</span>(((<span class=\"pl-en\">Document</span>)<span class=\"pl-smi\">list</span>[<span class=\"pl-smi\">i</span>]).<span class=\"pl-smi\">Id</span>.<span class=\"pl-en\">ToString</span>(), <span class=\"pl-k\">out</span> <span class=\"pl-smi\">n</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L29\" class=\"blob-num js-line-number\" data-line-number=\"29\"></td>\n        <td id=\"file-gistfile1-cs-LC29\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t\t<span class=\"pl-k\">if</span> (<span class=\"pl-smi\">n</span> <span class=\"pl-k\">&gt;</span> <span class=\"pl-c1\">0</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L30\" class=\"blob-num js-line-number\" data-line-number=\"30\"></td>\n        <td id=\"file-gistfile1-cs-LC30\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t\t{</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L31\" class=\"blob-num js-line-number\" data-line-number=\"31\"></td>\n        <td id=\"file-gistfile1-cs-LC31\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t\t\t<span class=\"pl-k\">try</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L32\" class=\"blob-num js-line-number\" data-line-number=\"32\"></td>\n        <td id=\"file-gistfile1-cs-LC32\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t\t\t{</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L33\" class=\"blob-num js-line-number\" data-line-number=\"33\"></td>\n        <td id=\"file-gistfile1-cs-LC33\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t\t\t\t<span class=\"pl-en\">Document</span> <span class=\"pl-smi\">d</span> <span class=\"pl-k\">=</span> <span class=\"pl-k\">new</span> <span class=\"pl-en\">Document</span>(<span class=\"pl-smi\">n</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L34\" class=\"blob-num js-line-number\" data-line-number=\"34\"></td>\n        <td id=\"file-gistfile1-cs-LC34\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t\t\t\t<span class=\"pl-smi\">d</span>.<span class=\"pl-en\">Publish</span>(<span class=\"pl-k\">new</span> <span class=\"pl-en\">User</span>(<span class=\"pl-c1\">0</span>));</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L35\" class=\"blob-num js-line-number\" data-line-number=\"35\"></td>\n        <td id=\"file-gistfile1-cs-LC35\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t\t\t}</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L36\" class=\"blob-num js-line-number\" data-line-number=\"36\"></td>\n        <td id=\"file-gistfile1-cs-LC36\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t\t\t<span class=\"pl-k\">catch</span> { }</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L37\" class=\"blob-num js-line-number\" data-line-number=\"37\"></td>\n        <td id=\"file-gistfile1-cs-LC37\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t\t}</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L38\" class=\"blob-num js-line-number\" data-line-number=\"38\"></td>\n        <td id=\"file-gistfile1-cs-LC38\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t}</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L39\" class=\"blob-num js-line-number\" data-line-number=\"39\"></td>\n        <td id=\"file-gistfile1-cs-LC39\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t}</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L40\" class=\"blob-num js-line-number\" data-line-number=\"40\"></td>\n        <td id=\"file-gistfile1-cs-LC40\" class=\"blob-code blob-code-inner js-file-line\">\t\t}</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L41\" class=\"blob-num js-line-number\" data-line-number=\"41\"></td>\n        <td id=\"file-gistfile1-cs-LC41\" class=\"blob-code blob-code-inner js-file-line\">\t\t<span class=\"pl-k\">else</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L42\" class=\"blob-num js-line-number\" data-line-number=\"42\"></td>\n        <td id=\"file-gistfile1-cs-LC42\" class=\"blob-code blob-code-inner js-file-line\">\t\t{</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L43\" class=\"blob-num js-line-number\" data-line-number=\"43\"></td>\n        <td id=\"file-gistfile1-cs-LC43\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t<span class=\"pl-en\">Document</span> <span class=\"pl-smi\">d</span> <span class=\"pl-k\">=</span> <span class=\"pl-k\">new</span> <span class=\"pl-en\">Document</span>(<span class=\"pl-smi\">docId</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L44\" class=\"blob-num js-line-number\" data-line-number=\"44\"></td>\n        <td id=\"file-gistfile1-cs-LC44\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t<span class=\"pl-smi\">d</span>.<span class=\"pl-smi\">Template</span> <span class=\"pl-k\">=</span> <span class=\"pl-smi\">templateId</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L45\" class=\"blob-num js-line-number\" data-line-number=\"45\"></td>\n        <td id=\"file-gistfile1-cs-LC45\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t<span class=\"pl-smi\">d</span>.<span class=\"pl-en\">Publish</span>(<span class=\"pl-k\">new</span> <span class=\"pl-en\">User</span>(<span class=\"pl-c1\">0</span>));</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L46\" class=\"blob-num js-line-number\" data-line-number=\"46\"></td>\n        <td id=\"file-gistfile1-cs-LC46\" class=\"blob-code blob-code-inner js-file-line\">\t\t}</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L47\" class=\"blob-num js-line-number\" data-line-number=\"47\"></td>\n        <td id=\"file-gistfile1-cs-LC47\" class=\"blob-code blob-code-inner js-file-line\">\t}</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L48\" class=\"blob-num js-line-number\" data-line-number=\"48\"></td>\n        <td id=\"file-gistfile1-cs-LC48\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L49\" class=\"blob-num js-line-number\" data-line-number=\"49\"></td>\n        <td id=\"file-gistfile1-cs-LC49\" class=\"blob-code blob-code-inner js-file-line\">\t<span class=\"pl-k\">private</span> <span class=\"pl-en\">ArrayList</span> <span class=\"pl-en\">GetDocumentChildren</span>(<span class=\"pl-k\">int</span> <span class=\"pl-smi\">docId</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L50\" class=\"blob-num js-line-number\" data-line-number=\"50\"></td>\n        <td id=\"file-gistfile1-cs-LC50\" class=\"blob-code blob-code-inner js-file-line\">\t{</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L51\" class=\"blob-num js-line-number\" data-line-number=\"51\"></td>\n        <td id=\"file-gistfile1-cs-LC51\" class=\"blob-code blob-code-inner js-file-line\">\t\t<span class=\"pl-en\">Document</span> <span class=\"pl-smi\">doc</span> <span class=\"pl-k\">=</span> <span class=\"pl-k\">new</span> <span class=\"pl-en\">Document</span>(<span class=\"pl-smi\">docId</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L52\" class=\"blob-num js-line-number\" data-line-number=\"52\"></td>\n        <td id=\"file-gistfile1-cs-LC52\" class=\"blob-code blob-code-inner js-file-line\">\t\t<span class=\"pl-en\">Document</span>[] <span class=\"pl-smi\">children</span> <span class=\"pl-k\">=</span> <span class=\"pl-smi\">doc</span>.<span class=\"pl-smi\">Children</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L53\" class=\"blob-num js-line-number\" data-line-number=\"53\"></td>\n        <td id=\"file-gistfile1-cs-LC53\" class=\"blob-code blob-code-inner js-file-line\">\t\t</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L54\" class=\"blob-num js-line-number\" data-line-number=\"54\"></td>\n        <td id=\"file-gistfile1-cs-LC54\" class=\"blob-code blob-code-inner js-file-line\">\t\t<span class=\"pl-en\">ArrayList</span> <span class=\"pl-smi\">list</span> <span class=\"pl-k\">=</span> <span class=\"pl-k\">new</span> <span class=\"pl-en\">ArrayList</span>();</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L55\" class=\"blob-num js-line-number\" data-line-number=\"55\"></td>\n        <td id=\"file-gistfile1-cs-LC55\" class=\"blob-code blob-code-inner js-file-line\">\t\t<span class=\"pl-k\">if</span> (<span class=\"pl-smi\">children</span>.<span class=\"pl-smi\">Length</span> <span class=\"pl-k\">&gt;</span> <span class=\"pl-c1\">0</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L56\" class=\"blob-num js-line-number\" data-line-number=\"56\"></td>\n        <td id=\"file-gistfile1-cs-LC56\" class=\"blob-code blob-code-inner js-file-line\">\t\t{</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L57\" class=\"blob-num js-line-number\" data-line-number=\"57\"></td>\n        <td id=\"file-gistfile1-cs-LC57\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t<span class=\"pl-k\">for</span> (<span class=\"pl-k\">int</span> <span class=\"pl-smi\">i</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">0</span>; <span class=\"pl-smi\">i</span> <span class=\"pl-k\">&lt;</span> <span class=\"pl-smi\">children</span>.<span class=\"pl-smi\">Length</span>; <span class=\"pl-smi\">i</span><span class=\"pl-k\">++</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L58\" class=\"blob-num js-line-number\" data-line-number=\"58\"></td>\n        <td id=\"file-gistfile1-cs-LC58\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t{</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L59\" class=\"blob-num js-line-number\" data-line-number=\"59\"></td>\n        <td id=\"file-gistfile1-cs-LC59\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t<span class=\"pl-k\">if</span> (<span class=\"pl-smi\">children</span>[<span class=\"pl-smi\">i</span>].<span class=\"pl-smi\">HasChildren</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L60\" class=\"blob-num js-line-number\" data-line-number=\"60\"></td>\n        <td id=\"file-gistfile1-cs-LC60\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t{</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L61\" class=\"blob-num js-line-number\" data-line-number=\"61\"></td>\n        <td id=\"file-gistfile1-cs-LC61\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t\t<span class=\"pl-smi\">list</span>.<span class=\"pl-en\">AddRange</span>(<span class=\"pl-en\">GetDocumentChildren</span>(<span class=\"pl-smi\">children</span>[<span class=\"pl-smi\">i</span>].<span class=\"pl-smi\">Id</span>));</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L62\" class=\"blob-num js-line-number\" data-line-number=\"62\"></td>\n        <td id=\"file-gistfile1-cs-LC62\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t}</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L63\" class=\"blob-num js-line-number\" data-line-number=\"63\"></td>\n        <td id=\"file-gistfile1-cs-LC63\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t<span class=\"pl-smi\">list</span>.<span class=\"pl-en\">Add</span>(<span class=\"pl-smi\">children</span>[<span class=\"pl-smi\">i</span>]);</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L64\" class=\"blob-num js-line-number\" data-line-number=\"64\"></td>\n        <td id=\"file-gistfile1-cs-LC64\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t}</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L65\" class=\"blob-num js-line-number\" data-line-number=\"65\"></td>\n        <td id=\"file-gistfile1-cs-LC65\" class=\"blob-code blob-code-inner js-file-line\">\t\t}</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L66\" class=\"blob-num js-line-number\" data-line-number=\"66\"></td>\n        <td id=\"file-gistfile1-cs-LC66\" class=\"blob-code blob-code-inner js-file-line\">\t\t<span class=\"pl-k\">return</span> <span class=\"pl-smi\">list</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L67\" class=\"blob-num js-line-number\" data-line-number=\"67\"></td>\n        <td id=\"file-gistfile1-cs-LC67\" class=\"blob-code blob-code-inner js-file-line\">\t}</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L68\" class=\"blob-num js-line-number\" data-line-number=\"68\"></td>\n        <td id=\"file-gistfile1-cs-LC68\" class=\"blob-code blob-code-inner js-file-line\">}</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/yetanotherchris/4956622/raw/f53364c0eb3178fb6a1e9e39d2ea2301c37c2823/gistfile1.cs\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/yetanotherchris/4956622#file-gistfile1-cs\">gistfile1.cs</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<h3>Database schema</h3>\n<p>This shows the schema of the Umbraco database, imported into Visio and organised so the tables are grouped together.</p>\n<p><a href=\"/assets/2013/02/umbraco-schema.gif\"><img src=\"/assets/2010/05/umbraco-schema.gif\" alt=\"umbraco schema\" style=\"width:200px;height:400px;\"></a></p>\n<p><a href=\"/assets/2013/02/umbraco-schema-visio.zip\">Download the original Visio file</a></p>\n<h3>Data export</h3>\n<p>This tool came from having troubles backing up an Umbraco database on gate.com - who didn’t allow user backups of SQL databases or remote SSIS packages. The host has now been switched but for users of similar hosts like godaddy.com the tool is useful. Find <a href=\"https://bitbucket.org/yetanotherchris/projects/src/cb7e4045a1c24c8fd667075283c9e08c0c72618b/Umbraco.DataExport/?at=default\">it here</a> (it needs Visual Studio to compile it, which you can get for free).</p>\n<h3>Links</h3>\n<p>These links are included to supplement the ones on the Umbraco.org site.</p>\n<ul>\n<li>V2 docs: <a href=\"http://umbraco.org/media/4d051ed3-63c2-42d6-a6c1-e93a14fc24a8-UmbracoDoc.pdf\">http://umbraco.org/media/4d051ed3-63c2-42d6-a6c1-e93a14fc24a8-UmbracoDoc.pdf</a></li>\n<li>Old docs: <a href=\"http://old.umbraco.org/frontpage/documentation.aspx\">http://old.umbraco.org/frontpage/documentation.aspx</a></li>\n<li><a href=\"http://en.wikibooks.org/wiki/Umbraco\">Wikibooks</a></li>\n<li><a href=\"http://our.umbraco.org/projects/website-utilities\">Official utilities:package</a></li>\n</ul>","frontmatter":{"title":"Umbraco hacks for developers","date":"May 05, 2010","description":"A lot of the tips below are relevant for Umbraco 3.0, issues such as the debug builds have been resolved in 4.0"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2010-05-05-umbraco-hacks-for-developers-2/","previous":{"fields":{"slug":"/2010-05-03-delegates-funcs-and-actions-by-example/"},"frontmatter":{"title":"Delegates, Funcs and Actions by example"}},"next":{"fields":{"slug":"/2010-05-10-regular-expression-testing-tool/"},"frontmatter":{"title":"Regular Expression Testing Tool"}}}}