{"data":{"site":{"siteMetadata":{"title":"Another Chris","author":"Chris Small"}},"markdownRemark":{"id":"b886e3de-6c42-5805-8ea2-25f1911b42a6","excerpt":"Part 1   Base 64 Guid Part 2   Numeric Alphanumeric Host Time Ticks MD5 Pronounceable password Base62 URL shortening: Tinyurl http://tinyarro.ws/ http://is.gd…","html":"<ul>\n<li>\n<p><strong>Part 1</strong> </p>\n<ul>\n<li><a href=\"#base64\">Base 64</a></li>\n<li><a href=\"#guid\">Guid</a></li>\n</ul>\n</li>\n<li>\n<p><strong>Part 2</strong> </p>\n<ul>\n<li><a href=\"/csharp/friendly-unique-id-generation-part-2#numeric\">Numeric</a></li>\n<li><a href=\"/csharp/friendly-unique-id-generation-part-2#alphanumeric\">Alphanumeric</a></li>\n<li><a href=\"/csharp/friendly-unique-id-generation-part-2#host\">Host</a></li>\n<li><a href=\"/csharp/friendly-unique-id-generation-part-2#time\">Time</a></li>\n<li><a href=\"/csharp/friendly-unique-id-generation-part-2#ticks\">Ticks</a></li>\n<li><a href=\"/csharp/friendly-unique-id-generation-part-2#md5\">MD5</a></li>\n<li><a href=\"/csharp/friendly-unique-id-generation-part-2#password\">Pronounceable password</a></li>\n<li><a href=\"/csharp/friendly-unique-id-generation-part-2#base62\">Base62</a></li>\n</ul>\n</li>\n</ul>\n<p>URL shortening:</p>\n<ul>\n<li><a href=\"http://tinyurl.com\">Tinyurl</a></li>\n<li><a href=\"http://tinyarro.ws/\">http://tinyarro.ws/</a></li>\n<li><a href=\"http://is.gd\">http://is.gd</a></li>\n<li><a href=\"http://bit.ly\">http://bit.ly</a></li>\n<li><a href=\"http://snurl.com\">http://snurl.com</a></li>\n</ul>\n<!--more-->\n<h3>Introduction</h3>\n<p>One of the commonest ways of sticking a unique identifier (UID) to a querystring in the .NET web world (or even classic ASP) is through Microsoft’s famous globally unique identifier, or guid. So you may see some kind of url like:</p>\n<blockquote>\n<p>userdetails.aspx?id={1234-1234-1234-1234}</p>\n</blockquote>\n<p>Where the 1234 parts are hex versions of the guid, which is just a unique 16 byte number. These are used for two purposes, the first is that they generally map to the primary key of the database table being used, for example the Id column of Users will be a guid. The second reason is that they aren’t guessable. So userdetails.aspx?id=3 makes you realise you could get user ID 2’s details by just changing the url. A guid avoids tedious security checks to get around this.</p>\n<p>You get variations on guids (Guids are just implementations of version 4 of the <a href=\"http://en.wikipedia.org/wiki/UUID#Version_4_.28random.29\">UUID format</a>) in PHP with its unique id function, and Java/J2EE has similar too. But why is it when you look at youtube you don’t get this extremely long hex number at the end of its urls? For example</p>\n<blockquote>\n<p>youtube.com/?v=123123</p>\n</blockquote>\n<p>Or another example, tinyurl.com. This has urls similar to</p>\n<blockquote>\n<p>tinyurl.com/3rtIee</p>\n</blockquote>\n<p>These are unique ids, but in integer format and not guids. This prompted to me to write this article and the accompanying code. I basically wanted to see how many different ways I could create a unique readable or semi-readable id. The id could be used anywhere that a code is needed: a url, a registeration email, or maybe a passcode given out on paper.</p>\n<p><strong>The most popular use of the small URL websites is on twitter and in magazines</strong>, for obvious reasons - space is limited. This article isn’t just concentrating on those services, but general alternatives however un-realistic they are.</p>\n<h3>Clashes</h3>\n<p>First, before I go through each of the methods I came up with, a short bit information on clashes.</p>\n<p>How unique are the IDs generated in the methods below (except for the Guid one)? This of course depends on the method, but most depend on random number generation and the current time in some way.</p>\n<p>All of the methods below except for the guid and base 62 method rely on the database table having a key column to store the id in. So an example table definition might be:</p>\n<p><code class=\"language-text\">&lt;br /&gt;\nId Int&lt;br /&gt;\nKey Varchar(32)&lt;br /&gt;\nUrl Varchar(256)&lt;br /&gt;</code></p>\n<p>The key column would be indexed, or maybe even the primary key. The downside to this versus the guid/base 62 method is that you would have to check to see if the key already exists before adding it and any value. So all but the guid and base 62 method rely on an insert check into the database. You could probably take the risk and skip this with the tickcount method, or depending on how many urls you want to store, do the same with the others.</p>\n<p>But in summary any key clashes are worked around via a database select statement before insertion.</p>\n<p>Full output of all unique id generation types</p>\n<pre>Base64:         pzikpg==\nNumber:         37-82\nAlpha:          huj9\nHost:           32fb1dfe\nTime:           22ba\nTicks:          8cb46e251f0f610\nMD5:            7cbae8cd41a9d13892c8feb8e435c5e\nGuid:           26aa1880-1e2d-426d-8dd6-3dda7a4b8a49\nBase62:         4gfFC3\n</pre>\n<p><a name=\"base64\"></a></p>\n<h3>Base 64</h3>\n<p>This method gets 4 random numbers, puts them in a 4 byte array and then base64’s the array. The clash rate is</p>\n<blockquote>\n<p>P(A AND B AND C AND D) = P(A) x P(B) x P(C) x P(D)<br>\n= 1/255 x 1/255 x 1/255 x 1/255<br>\n= 0.004 x 0.004 x 0.004 x 0.004<br>\n= 0.000000000256<br>\n= 1 / 0.000000000256<br>\n= 1 / 3,906,250,000 </p>\n</blockquote>\n<p>The id is nice and short and fairly easy to read out. You always get “==” at the end of a base64’d string, as it’s needed for padding (a good explanation can be found here).</p>\n<h4>Example output</h4>\n<blockquote>\n<p>cEPypg==</p>\n</blockquote>\n<h4>Source</h4>\n<p><div id=\"gist4746446\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-gistfile1-cs\" class=\"file\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-c \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\">\n      <tr>\n        <td id=\"file-gistfile1-cs-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-gistfile1-cs-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">private</span> <span class=\"pl-k\">static</span> <span class=\"pl-en\">Random</span> <span class=\"pl-smi\">_random</span> <span class=\"pl-k\">=</span> <span class=\"pl-k\">new</span> <span class=\"pl-en\">Random</span>();</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-gistfile1-cs-LC2\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-gistfile1-cs-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">public</span> <span class=\"pl-k\">static</span> <span class=\"pl-k\">string</span> <span class=\"pl-en\">Base64Hash</span>()</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-gistfile1-cs-LC4\" class=\"blob-code blob-code-inner js-file-line\">{</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-gistfile1-cs-LC5\" class=\"blob-code blob-code-inner js-file-line\">\t<span class=\"pl-k\">byte</span>[] <span class=\"pl-smi\">buffer</span> <span class=\"pl-k\">=</span> <span class=\"pl-en\">GetRandom</span>(<span class=\"pl-c1\">4</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-gistfile1-cs-LC6\" class=\"blob-code blob-code-inner js-file-line\">\t<span class=\"pl-k\">return</span> <span class=\"pl-smi\">Convert</span>.<span class=\"pl-en\">ToBase64String</span>(<span class=\"pl-smi\">buffer</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-gistfile1-cs-LC7\" class=\"blob-code blob-code-inner js-file-line\">}</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-gistfile1-cs-LC8\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-gistfile1-cs-LC9\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">//</span> &lt;summary&gt;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-gistfile1-cs-LC10\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">//</span> This is used by all Unique identifier examples</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-gistfile1-cs-LC11\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">//</span> &lt;/summary&gt;</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L12\" class=\"blob-num js-line-number\" data-line-number=\"12\"></td>\n        <td id=\"file-gistfile1-cs-LC12\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">public</span> <span class=\"pl-k\">static</span> <span class=\"pl-k\">byte</span>[] <span class=\"pl-en\">GetRandom</span>(<span class=\"pl-k\">int</span> <span class=\"pl-smi\">size</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L13\" class=\"blob-num js-line-number\" data-line-number=\"13\"></td>\n        <td id=\"file-gistfile1-cs-LC13\" class=\"blob-code blob-code-inner js-file-line\">{</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L14\" class=\"blob-num js-line-number\" data-line-number=\"14\"></td>\n        <td id=\"file-gistfile1-cs-LC14\" class=\"blob-code blob-code-inner js-file-line\">\t<span class=\"pl-k\">byte</span>[] <span class=\"pl-smi\">buffer</span> <span class=\"pl-k\">=</span> <span class=\"pl-k\">new</span> <span class=\"pl-k\">byte</span>[<span class=\"pl-smi\">size</span>];</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L15\" class=\"blob-num js-line-number\" data-line-number=\"15\"></td>\n        <td id=\"file-gistfile1-cs-LC15\" class=\"blob-code blob-code-inner js-file-line\">\t<span class=\"pl-smi\">_random</span>.<span class=\"pl-en\">NextBytes</span>(<span class=\"pl-smi\">buffer</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L16\" class=\"blob-num js-line-number\" data-line-number=\"16\"></td>\n        <td id=\"file-gistfile1-cs-LC16\" class=\"blob-code blob-code-inner js-file-line\">\t<span class=\"pl-k\">return</span> <span class=\"pl-smi\">buffer</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-cs-L17\" class=\"blob-num js-line-number\" data-line-number=\"17\"></td>\n        <td id=\"file-gistfile1-cs-LC17\" class=\"blob-code blob-code-inner js-file-line\">}</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/yetanotherchris/4746446/raw/75d2090bcb370d14ecd69899e64c53f0ec6c60ca/gistfile1.cs\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/yetanotherchris/4746446#file-gistfile1-cs\">gistfile1.cs</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div><br>\n<a name=\"guid\"></a></p>\n<h3>Guid</h3>\n<p>This just produces a guid in string format. It’s not really viable for the ids we’re trying to produce unless you want something globally unique. But in reality, you probably don’t need your id to be globally unique unless it really is a large scale application, or you want to make use of SQL Server’s guid support which almost certainly has its indexes and PK lookups optimised for guids along with plain old identity ints.</p>\n<h4>Example output</h4>\n<blockquote>\n<p>6c1f05c7-6e8b-4a36-b180-2544d81ebb43</p>\n</blockquote>\n<h4>Source</h4>\n<pre>public static string GuidToString()\n{\n    return Guid.NewGuid().ToString();\n}\n</pre>","frontmatter":{"title":"Friendly Unique Id Generation Part 1","date":"March 03, 2009","description":"The first of two blog posts about generating url-friendly alternatives to the guid."}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2009-03-03-friendly-unique-id-generation-part-1/","previous":{"fields":{"slug":"/2009-02-28-csharp-design-patterns-the-observer-pattern/"},"frontmatter":{"title":"C# Design Patterns: the Observer pattern"}},"next":{"fields":{"slug":"/2009-03-03-google-chrome-about-pages/"},"frontmatter":{"title":"Google chrome about pages"}}}}