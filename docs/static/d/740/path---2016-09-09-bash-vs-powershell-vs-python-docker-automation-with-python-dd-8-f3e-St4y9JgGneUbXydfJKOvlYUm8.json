{"data":{"site":{"siteMetadata":{"title":"Another Chris","author":"Chris Small"}},"markdownRemark":{"id":"03b00c9b-ff43-521e-a240-97b654307edc","excerpt":"Today I became a Python developer (writing a single script counts as a being a Python developer doesn’t it?!). This was born from getting frustrated going…","html":"<p>Today I became a Python developer (writing a single script counts as a being a Python developer doesn’t it?!).</p>\n<p>This was born from getting frustrated going between Powershell and Bash for automating Docker. As the comments in the gist below describe, I exhausted many different approaches to pulling the latest Docker images and bringing them up on a DigitalOcean server. As this is only for some low key sites and personal projects, I ended up running a Python script on the server via SSH.</p>\n<p>The mildly amusing part to picking Python was the pOpen API doesn’t behave in the same way on Windows as on Linux (Linux is picky about using using lists). I also realised Python 3 should’ve been my choice from the start, instead of 2 - but running python on an Ubuntu server always defaults to 2.7, so you end up doing a <code class=\"language-text\">python3 myscript.py</code>.</p>\n<p><div id=\"gist39555002\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-docker-automation-py\" class=\"file\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-python \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\">\n      <tr>\n        <td id=\"file-docker-automation-py-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-docker-automation-py-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-s\"><span class=\"pl-pds\">&#39;&#39;&#39;</span></span></td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-docker-automation-py-LC2\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-s\">This script brings up the entire stack of Docker containers, removing the current ones.</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-docker-automation-py-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-s\"></span></td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-docker-automation-py-LC4\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-s\">Docker compose was tried for this task and it wasn&#39;t customisable enough.</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-docker-automation-py-LC5\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-s\">Docker cloud was tried (with stack files) and was buggy (failed to launch, no logs returned).</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-docker-automation-py-LC6\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-s\">Docker machine was tried, but it can&#39;t connect to existing servers only ones it created.</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-docker-automation-py-LC7\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-s\">Rancher was too heavy weight for the task, as the containers are lightweight in DigitalOcean.</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-docker-automation-py-LC8\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-s\">Kubernetes would&#39;ve been too heavy weight for DigitalOcean.</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-docker-automation-py-LC9\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-s\">It was written in Powershell and worked. But then converting it to Bash was too much effort.</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-docker-automation-py-LC10\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-s\">Powershell for Linux is too much effort to install without a debian package (and none standard)</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-docker-automation-py-LC11\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-s\"><span class=\"pl-pds\">&#39;&#39;&#39;</span></span></td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L12\" class=\"blob-num js-line-number\" data-line-number=\"12\"></td>\n        <td id=\"file-docker-automation-py-LC12\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L13\" class=\"blob-num js-line-number\" data-line-number=\"13\"></td>\n        <td id=\"file-docker-automation-py-LC13\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">import</span> subprocess</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L14\" class=\"blob-num js-line-number\" data-line-number=\"14\"></td>\n        <td id=\"file-docker-automation-py-LC14\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">from</span> subprocess <span class=\"pl-k\">import</span> <span class=\"pl-c1\">PIPE</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L15\" class=\"blob-num js-line-number\" data-line-number=\"15\"></td>\n        <td id=\"file-docker-automation-py-LC15\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">from</span> datetime <span class=\"pl-k\">import</span> datetime</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L16\" class=\"blob-num js-line-number\" data-line-number=\"16\"></td>\n        <td id=\"file-docker-automation-py-LC16\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L17\" class=\"blob-num js-line-number\" data-line-number=\"17\"></td>\n        <td id=\"file-docker-automation-py-LC17\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">class</span> <span class=\"pl-en\">NiceLogger</span>:</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L18\" class=\"blob-num js-line-number\" data-line-number=\"18\"></td>\n        <td id=\"file-docker-automation-py-LC18\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">def</span> <span class=\"pl-en\">log</span>(<span class=\"pl-smi\"><span class=\"pl-smi\">self</span></span>, <span class=\"pl-smi\">message</span>):</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L19\" class=\"blob-num js-line-number\" data-line-number=\"19\"></td>\n        <td id=\"file-docker-automation-py-LC19\" class=\"blob-code blob-code-inner js-file-line\">        datenow <span class=\"pl-k\">=</span> datetime.today().strftime(<span class=\"pl-s\"><span class=\"pl-pds\">&#39;</span><span class=\"pl-c1\">%d</span>-%m-%Y %H:%M:%S<span class=\"pl-pds\">&#39;</span></span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L20\" class=\"blob-num js-line-number\" data-line-number=\"20\"></td>\n        <td id=\"file-docker-automation-py-LC20\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c1\">print</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span><span class=\"pl-c1\">{0}</span> |  <span class=\"pl-c1\">{1}</span><span class=\"pl-pds\">&quot;</span></span>.format(datenow, message))</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L21\" class=\"blob-num js-line-number\" data-line-number=\"21\"></td>\n        <td id=\"file-docker-automation-py-LC21\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L22\" class=\"blob-num js-line-number\" data-line-number=\"22\"></td>\n        <td id=\"file-docker-automation-py-LC22\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L23\" class=\"blob-num js-line-number\" data-line-number=\"23\"></td>\n        <td id=\"file-docker-automation-py-LC23\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">class</span> <span class=\"pl-en\">DockerHelper</span>:</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L24\" class=\"blob-num js-line-number\" data-line-number=\"24\"></td>\n        <td id=\"file-docker-automation-py-LC24\" class=\"blob-code blob-code-inner js-file-line\">    niceLogger <span class=\"pl-k\">=</span> NiceLogger()</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L25\" class=\"blob-num js-line-number\" data-line-number=\"25\"></td>\n        <td id=\"file-docker-automation-py-LC25\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L26\" class=\"blob-num js-line-number\" data-line-number=\"26\"></td>\n        <td id=\"file-docker-automation-py-LC26\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">def</span> <span class=\"pl-en\">clean_old_images</span>(<span class=\"pl-smi\"><span class=\"pl-smi\">self</span></span>):</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L27\" class=\"blob-num js-line-number\" data-line-number=\"27\"></td>\n        <td id=\"file-docker-automation-py-LC27\" class=\"blob-code blob-code-inner js-file-line\">        command <span class=\"pl-k\">=</span> [<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>docker<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>images<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>-q<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>-f<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>dangling=true<span class=\"pl-pds\">&quot;</span></span>]</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L28\" class=\"blob-num js-line-number\" data-line-number=\"28\"></td>\n        <td id=\"file-docker-automation-py-LC28\" class=\"blob-code blob-code-inner js-file-line\">        image_ids <span class=\"pl-k\">=</span> <span class=\"pl-c1\">self</span>.run_command(command)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L29\" class=\"blob-num js-line-number\" data-line-number=\"29\"></td>\n        <td id=\"file-docker-automation-py-LC29\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L30\" class=\"blob-num js-line-number\" data-line-number=\"30\"></td>\n        <td id=\"file-docker-automation-py-LC30\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">for</span> <span class=\"pl-c1\">id</span> <span class=\"pl-k\">in</span> image_ids.stdout.readlines():</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L31\" class=\"blob-num js-line-number\" data-line-number=\"31\"></td>\n        <td id=\"file-docker-automation-py-LC31\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-c1\">id</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">id</span>.decode(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>utf-8<span class=\"pl-pds\">&quot;</span></span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L32\" class=\"blob-num js-line-number\" data-line-number=\"32\"></td>\n        <td id=\"file-docker-automation-py-LC32\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-c1\">id</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">id</span>.replace(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span><span class=\"pl-cce\">\\n</span><span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span><span class=\"pl-pds\">&quot;</span></span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L33\" class=\"blob-num js-line-number\" data-line-number=\"33\"></td>\n        <td id=\"file-docker-automation-py-LC33\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L34\" class=\"blob-num js-line-number\" data-line-number=\"34\"></td>\n        <td id=\"file-docker-automation-py-LC34\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-c1\">self</span>.niceLogger.log(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Removing container image id <span class=\"pl-pds\">&quot;</span></span> <span class=\"pl-k\">+</span> <span class=\"pl-c1\">id</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L35\" class=\"blob-num js-line-number\" data-line-number=\"35\"></td>\n        <td id=\"file-docker-automation-py-LC35\" class=\"blob-code blob-code-inner js-file-line\">            command <span class=\"pl-k\">=</span> [<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>docker<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>rmi<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>-f<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-c1\">str</span>(<span class=\"pl-c1\">id</span>)]</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L36\" class=\"blob-num js-line-number\" data-line-number=\"36\"></td>\n        <td id=\"file-docker-automation-py-LC36\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-c1\">self</span>.run_command(command)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L37\" class=\"blob-num js-line-number\" data-line-number=\"37\"></td>\n        <td id=\"file-docker-automation-py-LC37\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L38\" class=\"blob-num js-line-number\" data-line-number=\"38\"></td>\n        <td id=\"file-docker-automation-py-LC38\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">def</span> <span class=\"pl-en\">remove_container</span>(<span class=\"pl-smi\"><span class=\"pl-smi\">self</span></span>, <span class=\"pl-smi\">containerName</span>):</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L39\" class=\"blob-num js-line-number\" data-line-number=\"39\"></td>\n        <td id=\"file-docker-automation-py-LC39\" class=\"blob-code blob-code-inner js-file-line\">        command <span class=\"pl-k\">=</span> [<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>docker<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>rm<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>-f<span class=\"pl-pds\">&quot;</span></span>, containerName]</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L40\" class=\"blob-num js-line-number\" data-line-number=\"40\"></td>\n        <td id=\"file-docker-automation-py-LC40\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c1\">self</span>.run_command(command)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L41\" class=\"blob-num js-line-number\" data-line-number=\"41\"></td>\n        <td id=\"file-docker-automation-py-LC41\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c1\">self</span>.niceLogger.log(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span> - Removed <span class=\"pl-pds\">&quot;</span></span> <span class=\"pl-k\">+</span> containerName)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L42\" class=\"blob-num js-line-number\" data-line-number=\"42\"></td>\n        <td id=\"file-docker-automation-py-LC42\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L43\" class=\"blob-num js-line-number\" data-line-number=\"43\"></td>\n        <td id=\"file-docker-automation-py-LC43\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">def</span> <span class=\"pl-en\">create_network</span>(<span class=\"pl-smi\"><span class=\"pl-smi\">self</span></span>):</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L44\" class=\"blob-num js-line-number\" data-line-number=\"44\"></td>\n        <td id=\"file-docker-automation-py-LC44\" class=\"blob-code blob-code-inner js-file-line\">        command <span class=\"pl-k\">=</span> [<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>docker<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>network<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>create<span class=\"pl-pds\">&quot;</span></span>, config[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>NetworkName<span class=\"pl-pds\">&quot;</span></span>]]</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L45\" class=\"blob-num js-line-number\" data-line-number=\"45\"></td>\n        <td id=\"file-docker-automation-py-LC45\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c1\">self</span>.run_command(command)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L46\" class=\"blob-num js-line-number\" data-line-number=\"46\"></td>\n        <td id=\"file-docker-automation-py-LC46\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L47\" class=\"blob-num js-line-number\" data-line-number=\"47\"></td>\n        <td id=\"file-docker-automation-py-LC47\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">def</span> <span class=\"pl-en\">pull_container_image</span>(<span class=\"pl-smi\"><span class=\"pl-smi\">self</span></span>, <span class=\"pl-smi\">containerImage</span>):</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L48\" class=\"blob-num js-line-number\" data-line-number=\"48\"></td>\n        <td id=\"file-docker-automation-py-LC48\" class=\"blob-code blob-code-inner js-file-line\">        command <span class=\"pl-k\">=</span> [<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>docker<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>pull<span class=\"pl-pds\">&quot;</span></span>, containerImage]</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L49\" class=\"blob-num js-line-number\" data-line-number=\"49\"></td>\n        <td id=\"file-docker-automation-py-LC49\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c1\">self</span>.run_command(command)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L50\" class=\"blob-num js-line-number\" data-line-number=\"50\"></td>\n        <td id=\"file-docker-automation-py-LC50\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c1\">self</span>.niceLogger.log(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span> - Pulled <span class=\"pl-pds\">&quot;</span></span> <span class=\"pl-k\">+</span> containerImage)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L51\" class=\"blob-num js-line-number\" data-line-number=\"51\"></td>\n        <td id=\"file-docker-automation-py-LC51\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L52\" class=\"blob-num js-line-number\" data-line-number=\"52\"></td>\n        <td id=\"file-docker-automation-py-LC52\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">def</span> <span class=\"pl-en\">run_container</span>(<span class=\"pl-smi\"><span class=\"pl-smi\">self</span></span>, <span class=\"pl-smi\">containerName</span>, <span class=\"pl-smi\">containerImage</span>, <span class=\"pl-smi\">args</span>):</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L53\" class=\"blob-num js-line-number\" data-line-number=\"53\"></td>\n        <td id=\"file-docker-automation-py-LC53\" class=\"blob-code blob-code-inner js-file-line\">        command <span class=\"pl-k\">=</span> [<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>docker<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>run<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>-d<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>--net<span class=\"pl-pds\">&quot;</span></span>, config[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>NetworkName<span class=\"pl-pds\">&quot;</span></span>], <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>--name<span class=\"pl-pds\">&quot;</span></span>, containerName]</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L54\" class=\"blob-num js-line-number\" data-line-number=\"54\"></td>\n        <td id=\"file-docker-automation-py-LC54\" class=\"blob-code blob-code-inner js-file-line\">        command.extend(args)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L55\" class=\"blob-num js-line-number\" data-line-number=\"55\"></td>\n        <td id=\"file-docker-automation-py-LC55\" class=\"blob-code blob-code-inner js-file-line\">        command.append(containerImage)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L56\" class=\"blob-num js-line-number\" data-line-number=\"56\"></td>\n        <td id=\"file-docker-automation-py-LC56\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L57\" class=\"blob-num js-line-number\" data-line-number=\"57\"></td>\n        <td id=\"file-docker-automation-py-LC57\" class=\"blob-code blob-code-inner js-file-line\">        popen <span class=\"pl-k\">=</span> <span class=\"pl-c1\">self</span>.run_command(command)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L58\" class=\"blob-num js-line-number\" data-line-number=\"58\"></td>\n        <td id=\"file-docker-automation-py-LC58\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L59\" class=\"blob-num js-line-number\" data-line-number=\"59\"></td>\n        <td id=\"file-docker-automation-py-LC59\" class=\"blob-code blob-code-inner js-file-line\">        error <span class=\"pl-k\">=</span> popen.stderr.readline().decode(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>utf-8<span class=\"pl-pds\">&quot;</span></span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L60\" class=\"blob-num js-line-number\" data-line-number=\"60\"></td>\n        <td id=\"file-docker-automation-py-LC60\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L61\" class=\"blob-num js-line-number\" data-line-number=\"61\"></td>\n        <td id=\"file-docker-automation-py-LC61\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">if</span> error <span class=\"pl-k\">!=</span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span><span class=\"pl-pds\">&quot;</span></span>:</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L62\" class=\"blob-num js-line-number\" data-line-number=\"62\"></td>\n        <td id=\"file-docker-automation-py-LC62\" class=\"blob-code blob-code-inner js-file-line\">            error <span class=\"pl-k\">=</span> error.replace(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span><span class=\"pl-cce\">\\n</span><span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span><span class=\"pl-pds\">&quot;</span></span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L63\" class=\"blob-num js-line-number\" data-line-number=\"63\"></td>\n        <td id=\"file-docker-automation-py-LC63\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-c1\">self</span>.niceLogger.log(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>An error occurred:<span class=\"pl-pds\">&quot;</span></span> <span class=\"pl-k\">+</span> error)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L64\" class=\"blob-num js-line-number\" data-line-number=\"64\"></td>\n        <td id=\"file-docker-automation-py-LC64\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">else</span>:</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L65\" class=\"blob-num js-line-number\" data-line-number=\"65\"></td>\n        <td id=\"file-docker-automation-py-LC65\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-c1\">id</span> <span class=\"pl-k\">=</span> popen.stdout.readline().decode(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>utf-8<span class=\"pl-pds\">&quot;</span></span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L66\" class=\"blob-num js-line-number\" data-line-number=\"66\"></td>\n        <td id=\"file-docker-automation-py-LC66\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-c1\">id</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">id</span>.replace(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span><span class=\"pl-cce\">\\n</span><span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span><span class=\"pl-pds\">&quot;</span></span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L67\" class=\"blob-num js-line-number\" data-line-number=\"67\"></td>\n        <td id=\"file-docker-automation-py-LC67\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-c1\">self</span>.niceLogger.log(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span> - New container ID <span class=\"pl-pds\">&quot;</span></span> <span class=\"pl-k\">+</span> <span class=\"pl-c1\">id</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L68\" class=\"blob-num js-line-number\" data-line-number=\"68\"></td>\n        <td id=\"file-docker-automation-py-LC68\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L69\" class=\"blob-num js-line-number\" data-line-number=\"69\"></td>\n        <td id=\"file-docker-automation-py-LC69\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">def</span> <span class=\"pl-en\">run_container_with_exec</span>(<span class=\"pl-smi\"><span class=\"pl-smi\">self</span></span>, <span class=\"pl-smi\">containerName</span>, <span class=\"pl-smi\">containerImage</span>, <span class=\"pl-smi\">execCommand</span>, <span class=\"pl-smi\">args</span>):</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L70\" class=\"blob-num js-line-number\" data-line-number=\"70\"></td>\n        <td id=\"file-docker-automation-py-LC70\" class=\"blob-code blob-code-inner js-file-line\">        command <span class=\"pl-k\">=</span> [<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>docker<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>run<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>-d<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>--net<span class=\"pl-pds\">&quot;</span></span>, config[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>NetworkName<span class=\"pl-pds\">&quot;</span></span>], <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>--name<span class=\"pl-pds\">&quot;</span></span>, containerName]</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L71\" class=\"blob-num js-line-number\" data-line-number=\"71\"></td>\n        <td id=\"file-docker-automation-py-LC71\" class=\"blob-code blob-code-inner js-file-line\">        command.extend(args)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L72\" class=\"blob-num js-line-number\" data-line-number=\"72\"></td>\n        <td id=\"file-docker-automation-py-LC72\" class=\"blob-code blob-code-inner js-file-line\">        command.append(containerImage)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L73\" class=\"blob-num js-line-number\" data-line-number=\"73\"></td>\n        <td id=\"file-docker-automation-py-LC73\" class=\"blob-code blob-code-inner js-file-line\">        command.append(execCommand)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L74\" class=\"blob-num js-line-number\" data-line-number=\"74\"></td>\n        <td id=\"file-docker-automation-py-LC74\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L75\" class=\"blob-num js-line-number\" data-line-number=\"75\"></td>\n        <td id=\"file-docker-automation-py-LC75\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c1\">self</span>.run_command(command)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L76\" class=\"blob-num js-line-number\" data-line-number=\"76\"></td>\n        <td id=\"file-docker-automation-py-LC76\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L77\" class=\"blob-num js-line-number\" data-line-number=\"77\"></td>\n        <td id=\"file-docker-automation-py-LC77\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">def</span> <span class=\"pl-en\">run_command</span>(<span class=\"pl-smi\"><span class=\"pl-smi\">self</span></span>, <span class=\"pl-smi\">command</span>):</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L78\" class=\"blob-num js-line-number\" data-line-number=\"78\"></td>\n        <td id=\"file-docker-automation-py-LC78\" class=\"blob-code blob-code-inner js-file-line\">        debugcommand <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span> - <span class=\"pl-c1\">{0}</span><span class=\"pl-pds\">&quot;</span></span>.format(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span> <span class=\"pl-pds\">&quot;</span></span>.join(command))</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L79\" class=\"blob-num js-line-number\" data-line-number=\"79\"></td>\n        <td id=\"file-docker-automation-py-LC79\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-c1\">self</span>.niceLogger.log(debugcommand)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L80\" class=\"blob-num js-line-number\" data-line-number=\"80\"></td>\n        <td id=\"file-docker-automation-py-LC80\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L81\" class=\"blob-num js-line-number\" data-line-number=\"81\"></td>\n        <td id=\"file-docker-automation-py-LC81\" class=\"blob-code blob-code-inner js-file-line\">        popen <span class=\"pl-k\">=</span> subprocess.Popen(command, <span class=\"pl-v\">stdin</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">PIPE</span>, <span class=\"pl-v\">stdout</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">PIPE</span>, <span class=\"pl-v\">stderr</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">PIPE</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L82\" class=\"blob-num js-line-number\" data-line-number=\"82\"></td>\n        <td id=\"file-docker-automation-py-LC82\" class=\"blob-code blob-code-inner js-file-line\">        popen.wait(<span class=\"pl-c1\">500</span>) <span class=\"pl-c\"><span class=\"pl-c\">#</span> wait a little for docker to complete</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L83\" class=\"blob-num js-line-number\" data-line-number=\"83\"></td>\n        <td id=\"file-docker-automation-py-LC83\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L84\" class=\"blob-num js-line-number\" data-line-number=\"84\"></td>\n        <td id=\"file-docker-automation-py-LC84\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">return</span> popen</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L85\" class=\"blob-num js-line-number\" data-line-number=\"85\"></td>\n        <td id=\"file-docker-automation-py-LC85\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L86\" class=\"blob-num js-line-number\" data-line-number=\"86\"></td>\n        <td id=\"file-docker-automation-py-LC86\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L87\" class=\"blob-num js-line-number\" data-line-number=\"87\"></td>\n        <td id=\"file-docker-automation-py-LC87\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">#</span> Some questions</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L88\" class=\"blob-num js-line-number\" data-line-number=\"88\"></td>\n        <td id=\"file-docker-automation-py-LC88\" class=\"blob-code blob-code-inner js-file-line\">containerNameSuffix <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span><span class=\"pl-pds\">&quot;</span></span></td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L89\" class=\"blob-num js-line-number\" data-line-number=\"89\"></td>\n        <td id=\"file-docker-automation-py-LC89\" class=\"blob-code blob-code-inner js-file-line\">gethost <span class=\"pl-k\">=</span> <span class=\"pl-c1\">input</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Local mode [Y/n]?<span class=\"pl-pds\">&quot;</span></span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L90\" class=\"blob-num js-line-number\" data-line-number=\"90\"></td>\n        <td id=\"file-docker-automation-py-LC90\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">if</span> gethost <span class=\"pl-k\">==</span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span><span class=\"pl-pds\">&quot;</span></span>:</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L91\" class=\"blob-num js-line-number\" data-line-number=\"91\"></td>\n        <td id=\"file-docker-automation-py-LC91\" class=\"blob-code blob-code-inner js-file-line\">    containerNameSuffix <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>-local<span class=\"pl-pds\">&quot;</span></span></td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L92\" class=\"blob-num js-line-number\" data-line-number=\"92\"></td>\n        <td id=\"file-docker-automation-py-LC92\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L93\" class=\"blob-num js-line-number\" data-line-number=\"93\"></td>\n        <td id=\"file-docker-automation-py-LC93\" class=\"blob-code blob-code-inner js-file-line\">registry <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span><span class=\"pl-pds\">&quot;</span></span></td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L94\" class=\"blob-num js-line-number\" data-line-number=\"94\"></td>\n        <td id=\"file-docker-automation-py-LC94\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L95\" class=\"blob-num js-line-number\" data-line-number=\"95\"></td>\n        <td id=\"file-docker-automation-py-LC95\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">#</span> Config</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L96\" class=\"blob-num js-line-number\" data-line-number=\"96\"></td>\n        <td id=\"file-docker-automation-py-LC96\" class=\"blob-code blob-code-inner js-file-line\">config <span class=\"pl-k\">=</span> {</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L97\" class=\"blob-num js-line-number\" data-line-number=\"97\"></td>\n        <td id=\"file-docker-automation-py-LC97\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>NetworkName<span class=\"pl-pds\">&quot;</span></span>: <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>NginxNetwork<span class=\"pl-pds\">&quot;</span></span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L98\" class=\"blob-num js-line-number\" data-line-number=\"98\"></td>\n        <td id=\"file-docker-automation-py-LC98\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>PapertrailUrl<span class=\"pl-pds\">&quot;</span></span>: <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>top-secret-url<span class=\"pl-pds\">&quot;</span></span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L99\" class=\"blob-num js-line-number\" data-line-number=\"99\"></td>\n        <td id=\"file-docker-automation-py-LC99\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>DataDogApiKey<span class=\"pl-pds\">&quot;</span></span>: <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>TOPSECRET-KEY<span class=\"pl-pds\">&quot;</span></span></td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L100\" class=\"blob-num js-line-number\" data-line-number=\"100\"></td>\n        <td id=\"file-docker-automation-py-LC100\" class=\"blob-code blob-code-inner js-file-line\">}</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L101\" class=\"blob-num js-line-number\" data-line-number=\"101\"></td>\n        <td id=\"file-docker-automation-py-LC101\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L102\" class=\"blob-num js-line-number\" data-line-number=\"102\"></td>\n        <td id=\"file-docker-automation-py-LC102\" class=\"blob-code blob-code-inner js-file-line\">containerImages <span class=\"pl-k\">=</span> {</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L103\" class=\"blob-num js-line-number\" data-line-number=\"103\"></td>\n        <td id=\"file-docker-automation-py-LC103\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Datadog<span class=\"pl-pds\">&quot;</span></span>: <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>datadog/docker-dd-agent:latest<span class=\"pl-pds\">&quot;</span></span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L104\" class=\"blob-num js-line-number\" data-line-number=\"104\"></td>\n        <td id=\"file-docker-automation-py-LC104\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Papertrail<span class=\"pl-pds\">&quot;</span></span>: <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>gliderlabs/logspout<span class=\"pl-pds\">&quot;</span></span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L105\" class=\"blob-num js-line-number\" data-line-number=\"105\"></td>\n        <td id=\"file-docker-automation-py-LC105\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>SecretProject1<span class=\"pl-pds\">&quot;</span></span>: registry <span class=\"pl-k\">+</span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>SecretProject1:latest<span class=\"pl-pds\">&quot;</span></span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L106\" class=\"blob-num js-line-number\" data-line-number=\"106\"></td>\n        <td id=\"file-docker-automation-py-LC106\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Nginx<span class=\"pl-pds\">&quot;</span></span>: registry <span class=\"pl-k\">+</span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>nginx-custom:latest<span class=\"pl-pds\">&quot;</span></span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L107\" class=\"blob-num js-line-number\" data-line-number=\"107\"></td>\n        <td id=\"file-docker-automation-py-LC107\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>SecretProject2<span class=\"pl-pds\">&quot;</span></span>: registry <span class=\"pl-k\">+</span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>SecretProject2:latest<span class=\"pl-pds\">&quot;</span></span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L108\" class=\"blob-num js-line-number\" data-line-number=\"108\"></td>\n        <td id=\"file-docker-automation-py-LC108\" class=\"blob-code blob-code-inner js-file-line\">}</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L109\" class=\"blob-num js-line-number\" data-line-number=\"109\"></td>\n        <td id=\"file-docker-automation-py-LC109\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L110\" class=\"blob-num js-line-number\" data-line-number=\"110\"></td>\n        <td id=\"file-docker-automation-py-LC110\" class=\"blob-code blob-code-inner js-file-line\">containerNames <span class=\"pl-k\">=</span> {</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L111\" class=\"blob-num js-line-number\" data-line-number=\"111\"></td>\n        <td id=\"file-docker-automation-py-LC111\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Datadog<span class=\"pl-pds\">&quot;</span></span>: <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>datadog<span class=\"pl-pds\">&quot;</span></span> <span class=\"pl-k\">+</span> containerNameSuffix,</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L112\" class=\"blob-num js-line-number\" data-line-number=\"112\"></td>\n        <td id=\"file-docker-automation-py-LC112\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Papertrail<span class=\"pl-pds\">&quot;</span></span>: <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>papertrail<span class=\"pl-pds\">&quot;</span></span> <span class=\"pl-k\">+</span> containerNameSuffix,</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L113\" class=\"blob-num js-line-number\" data-line-number=\"113\"></td>\n        <td id=\"file-docker-automation-py-LC113\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>SecretProject1<span class=\"pl-pds\">&quot;</span></span>: <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>SecretProject1<span class=\"pl-pds\">&quot;</span></span> <span class=\"pl-k\">+</span> containerNameSuffix,</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L114\" class=\"blob-num js-line-number\" data-line-number=\"114\"></td>\n        <td id=\"file-docker-automation-py-LC114\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Nginx<span class=\"pl-pds\">&quot;</span></span>: <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>nginx<span class=\"pl-pds\">&quot;</span></span> <span class=\"pl-k\">+</span> containerNameSuffix,</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L115\" class=\"blob-num js-line-number\" data-line-number=\"115\"></td>\n        <td id=\"file-docker-automation-py-LC115\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>SecretProject2<span class=\"pl-pds\">&quot;</span></span>: <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>SecretProject2<span class=\"pl-pds\">&quot;</span></span> <span class=\"pl-k\">+</span> containerNameSuffix,</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L116\" class=\"blob-num js-line-number\" data-line-number=\"116\"></td>\n        <td id=\"file-docker-automation-py-LC116\" class=\"blob-code blob-code-inner js-file-line\">}</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L117\" class=\"blob-num js-line-number\" data-line-number=\"117\"></td>\n        <td id=\"file-docker-automation-py-LC117\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L118\" class=\"blob-num js-line-number\" data-line-number=\"118\"></td>\n        <td id=\"file-docker-automation-py-LC118\" class=\"blob-code blob-code-inner js-file-line\">niceLogger <span class=\"pl-k\">=</span> NiceLogger()</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L119\" class=\"blob-num js-line-number\" data-line-number=\"119\"></td>\n        <td id=\"file-docker-automation-py-LC119\" class=\"blob-code blob-code-inner js-file-line\">niceLogger.log(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Variables:<span class=\"pl-pds\">&quot;</span></span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L120\" class=\"blob-num js-line-number\" data-line-number=\"120\"></td>\n        <td id=\"file-docker-automation-py-LC120\" class=\"blob-code blob-code-inner js-file-line\">niceLogger.log(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Container name suffix: <span class=\"pl-pds\">&quot;</span></span> <span class=\"pl-k\">+</span> containerNameSuffix)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L121\" class=\"blob-num js-line-number\" data-line-number=\"121\"></td>\n        <td id=\"file-docker-automation-py-LC121\" class=\"blob-code blob-code-inner js-file-line\">niceLogger.log(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Registry prefix: <span class=\"pl-pds\">&quot;</span></span> <span class=\"pl-k\">+</span> registry)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L122\" class=\"blob-num js-line-number\" data-line-number=\"122\"></td>\n        <td id=\"file-docker-automation-py-LC122\" class=\"blob-code blob-code-inner js-file-line\">niceLogger.log(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span><span class=\"pl-pds\">&quot;</span></span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L123\" class=\"blob-num js-line-number\" data-line-number=\"123\"></td>\n        <td id=\"file-docker-automation-py-LC123\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L124\" class=\"blob-num js-line-number\" data-line-number=\"124\"></td>\n        <td id=\"file-docker-automation-py-LC124\" class=\"blob-code blob-code-inner js-file-line\">niceLogger.log(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Cleaning images with &lt;none&gt; tags.<span class=\"pl-pds\">&quot;</span></span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L125\" class=\"blob-num js-line-number\" data-line-number=\"125\"></td>\n        <td id=\"file-docker-automation-py-LC125\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L126\" class=\"blob-num js-line-number\" data-line-number=\"126\"></td>\n        <td id=\"file-docker-automation-py-LC126\" class=\"blob-code blob-code-inner js-file-line\">dockerHelper <span class=\"pl-k\">=</span> DockerHelper()</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L127\" class=\"blob-num js-line-number\" data-line-number=\"127\"></td>\n        <td id=\"file-docker-automation-py-LC127\" class=\"blob-code blob-code-inner js-file-line\">dockerHelper.clean_old_images()</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L128\" class=\"blob-num js-line-number\" data-line-number=\"128\"></td>\n        <td id=\"file-docker-automation-py-LC128\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L129\" class=\"blob-num js-line-number\" data-line-number=\"129\"></td>\n        <td id=\"file-docker-automation-py-LC129\" class=\"blob-code blob-code-inner js-file-line\">niceLogger.log(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Removing containers.<span class=\"pl-pds\">&quot;</span></span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L130\" class=\"blob-num js-line-number\" data-line-number=\"130\"></td>\n        <td id=\"file-docker-automation-py-LC130\" class=\"blob-code blob-code-inner js-file-line\">dockerHelper.remove_container(containerNames[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Datadog<span class=\"pl-pds\">&quot;</span></span>])</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L131\" class=\"blob-num js-line-number\" data-line-number=\"131\"></td>\n        <td id=\"file-docker-automation-py-LC131\" class=\"blob-code blob-code-inner js-file-line\">dockerHelper.remove_container(containerNames[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Papertrail<span class=\"pl-pds\">&quot;</span></span>])</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L132\" class=\"blob-num js-line-number\" data-line-number=\"132\"></td>\n        <td id=\"file-docker-automation-py-LC132\" class=\"blob-code blob-code-inner js-file-line\">dockerHelper.remove_container(containerNames[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>SecretProject1<span class=\"pl-pds\">&quot;</span></span>])</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L133\" class=\"blob-num js-line-number\" data-line-number=\"133\"></td>\n        <td id=\"file-docker-automation-py-LC133\" class=\"blob-code blob-code-inner js-file-line\">dockerHelper.remove_container(containerNames[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Nginx<span class=\"pl-pds\">&quot;</span></span>])</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L134\" class=\"blob-num js-line-number\" data-line-number=\"134\"></td>\n        <td id=\"file-docker-automation-py-LC134\" class=\"blob-code blob-code-inner js-file-line\">dockerHelper.remove_container(containerNames[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>SecretProject2<span class=\"pl-pds\">&quot;</span></span>])</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L135\" class=\"blob-num js-line-number\" data-line-number=\"135\"></td>\n        <td id=\"file-docker-automation-py-LC135\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L136\" class=\"blob-num js-line-number\" data-line-number=\"136\"></td>\n        <td id=\"file-docker-automation-py-LC136\" class=\"blob-code blob-code-inner js-file-line\">niceLogger.log(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Pulling new images.<span class=\"pl-pds\">&quot;</span></span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L137\" class=\"blob-num js-line-number\" data-line-number=\"137\"></td>\n        <td id=\"file-docker-automation-py-LC137\" class=\"blob-code blob-code-inner js-file-line\">dockerHelper.pull_container_image(containerImages[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Datadog<span class=\"pl-pds\">&quot;</span></span>])</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L138\" class=\"blob-num js-line-number\" data-line-number=\"138\"></td>\n        <td id=\"file-docker-automation-py-LC138\" class=\"blob-code blob-code-inner js-file-line\">dockerHelper.pull_container_image(containerImages[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Papertrail<span class=\"pl-pds\">&quot;</span></span>])</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L139\" class=\"blob-num js-line-number\" data-line-number=\"139\"></td>\n        <td id=\"file-docker-automation-py-LC139\" class=\"blob-code blob-code-inner js-file-line\">dockerHelper.pull_container_image(containerImages[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>SecretProject1<span class=\"pl-pds\">&quot;</span></span>])</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L140\" class=\"blob-num js-line-number\" data-line-number=\"140\"></td>\n        <td id=\"file-docker-automation-py-LC140\" class=\"blob-code blob-code-inner js-file-line\">dockerHelper.pull_container_image(containerImages[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Nginx<span class=\"pl-pds\">&quot;</span></span>])</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L141\" class=\"blob-num js-line-number\" data-line-number=\"141\"></td>\n        <td id=\"file-docker-automation-py-LC141\" class=\"blob-code blob-code-inner js-file-line\">dockerHelper.pull_container_image(containerImages[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>SecretProject2<span class=\"pl-pds\">&quot;</span></span>])</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L142\" class=\"blob-num js-line-number\" data-line-number=\"142\"></td>\n        <td id=\"file-docker-automation-py-LC142\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L143\" class=\"blob-num js-line-number\" data-line-number=\"143\"></td>\n        <td id=\"file-docker-automation-py-LC143\" class=\"blob-code blob-code-inner js-file-line\">niceLogger.log(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Creating <span class=\"pl-c1\">{0}</span> network.<span class=\"pl-pds\">&quot;</span></span>.format(config[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>NetworkName<span class=\"pl-pds\">&quot;</span></span>]))</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L144\" class=\"blob-num js-line-number\" data-line-number=\"144\"></td>\n        <td id=\"file-docker-automation-py-LC144\" class=\"blob-code blob-code-inner js-file-line\">dockerHelper.create_network()</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L145\" class=\"blob-num js-line-number\" data-line-number=\"145\"></td>\n        <td id=\"file-docker-automation-py-LC145\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L146\" class=\"blob-num js-line-number\" data-line-number=\"146\"></td>\n        <td id=\"file-docker-automation-py-LC146\" class=\"blob-code blob-code-inner js-file-line\">niceLogger.log(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Adding SecretProject2.<span class=\"pl-pds\">&quot;</span></span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L147\" class=\"blob-num js-line-number\" data-line-number=\"147\"></td>\n        <td id=\"file-docker-automation-py-LC147\" class=\"blob-code blob-code-inner js-file-line\">dockerHelper.run_container(containerNames[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>SecretProject2<span class=\"pl-pds\">&quot;</span></span>], containerImages[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>SecretProject2<span class=\"pl-pds\">&quot;</span></span>],</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L148\" class=\"blob-num js-line-number\" data-line-number=\"148\"></td>\n        <td id=\"file-docker-automation-py-LC148\" class=\"blob-code blob-code-inner js-file-line\">                           [<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>--env-file<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>SecretProject2-env.list<span class=\"pl-pds\">&quot;</span></span>])</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L149\" class=\"blob-num js-line-number\" data-line-number=\"149\"></td>\n        <td id=\"file-docker-automation-py-LC149\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L150\" class=\"blob-num js-line-number\" data-line-number=\"150\"></td>\n        <td id=\"file-docker-automation-py-LC150\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">#</span> Add papertrail/datadog logging to DigitalOcean only</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L151\" class=\"blob-num js-line-number\" data-line-number=\"151\"></td>\n        <td id=\"file-docker-automation-py-LC151\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">if</span> containerNameSuffix <span class=\"pl-k\">==</span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span><span class=\"pl-pds\">&quot;</span></span>:</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L152\" class=\"blob-num js-line-number\" data-line-number=\"152\"></td>\n        <td id=\"file-docker-automation-py-LC152\" class=\"blob-code blob-code-inner js-file-line\">    niceLogger.log(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Adding datadog.<span class=\"pl-pds\">&quot;</span></span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L153\" class=\"blob-num js-line-number\" data-line-number=\"153\"></td>\n        <td id=\"file-docker-automation-py-LC153\" class=\"blob-code blob-code-inner js-file-line\">    dataDogArgs <span class=\"pl-k\">=</span> [<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>-v<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>/var/run/docker.sock:/var/run/docker.sock:ro<span class=\"pl-pds\">&quot;</span></span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L154\" class=\"blob-num js-line-number\" data-line-number=\"154\"></td>\n        <td id=\"file-docker-automation-py-LC154\" class=\"blob-code blob-code-inner js-file-line\">                   <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>-v<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>/proc/:/host/proc/:ro<span class=\"pl-pds\">&quot;</span></span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L155\" class=\"blob-num js-line-number\" data-line-number=\"155\"></td>\n        <td id=\"file-docker-automation-py-LC155\" class=\"blob-code blob-code-inner js-file-line\">                   <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>-v<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>/sys/fs/cgroup/:/host/sys/fs/cgroup:ro<span class=\"pl-pds\">&quot;</span></span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L156\" class=\"blob-num js-line-number\" data-line-number=\"156\"></td>\n        <td id=\"file-docker-automation-py-LC156\" class=\"blob-code blob-code-inner js-file-line\">                   <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>-e<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>API_KEY=<span class=\"pl-pds\">&quot;</span></span> <span class=\"pl-k\">+</span> config[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>DataDogApiKey<span class=\"pl-pds\">&quot;</span></span>]</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L157\" class=\"blob-num js-line-number\" data-line-number=\"157\"></td>\n        <td id=\"file-docker-automation-py-LC157\" class=\"blob-code blob-code-inner js-file-line\">                   ]</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L158\" class=\"blob-num js-line-number\" data-line-number=\"158\"></td>\n        <td id=\"file-docker-automation-py-LC158\" class=\"blob-code blob-code-inner js-file-line\">    dockerHelper.run_container(containerNames[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Datadog<span class=\"pl-pds\">&quot;</span></span>], containerImages[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Datadog<span class=\"pl-pds\">&quot;</span></span>], dataDogArgs)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L159\" class=\"blob-num js-line-number\" data-line-number=\"159\"></td>\n        <td id=\"file-docker-automation-py-LC159\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L160\" class=\"blob-num js-line-number\" data-line-number=\"160\"></td>\n        <td id=\"file-docker-automation-py-LC160\" class=\"blob-code blob-code-inner js-file-line\">    niceLogger.log(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Adding papertrail.<span class=\"pl-pds\">&quot;</span></span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L161\" class=\"blob-num js-line-number\" data-line-number=\"161\"></td>\n        <td id=\"file-docker-automation-py-LC161\" class=\"blob-code blob-code-inner js-file-line\">    paperTrailArgs <span class=\"pl-k\">=</span> [<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>-e<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&#39;</span>SYSLOG_HOSTNAME=&quot;<span class=\"pl-c1\">{{</span>.ContainerName<span class=\"pl-c1\">}}</span>&quot;<span class=\"pl-pds\">&#39;</span></span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L162\" class=\"blob-num js-line-number\" data-line-number=\"162\"></td>\n        <td id=\"file-docker-automation-py-LC162\" class=\"blob-code blob-code-inner js-file-line\">                      <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>--restart=always<span class=\"pl-pds\">&quot;</span></span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L163\" class=\"blob-num js-line-number\" data-line-number=\"163\"></td>\n        <td id=\"file-docker-automation-py-LC163\" class=\"blob-code blob-code-inner js-file-line\">                      <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>-v<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>/var/run/docker.sock:/var/run/docker.sock<span class=\"pl-pds\">&quot;</span></span></td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L164\" class=\"blob-num js-line-number\" data-line-number=\"164\"></td>\n        <td id=\"file-docker-automation-py-LC164\" class=\"blob-code blob-code-inner js-file-line\">                      ]</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L165\" class=\"blob-num js-line-number\" data-line-number=\"165\"></td>\n        <td id=\"file-docker-automation-py-LC165\" class=\"blob-code blob-code-inner js-file-line\">    papertTrailExec <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>syslog://<span class=\"pl-pds\">&quot;</span></span> <span class=\"pl-k\">+</span> config[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>PapertrailUrl<span class=\"pl-pds\">&quot;</span></span>]</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L166\" class=\"blob-num js-line-number\" data-line-number=\"166\"></td>\n        <td id=\"file-docker-automation-py-LC166\" class=\"blob-code blob-code-inner js-file-line\">    dockerHelper.run_container_with_exec(containerNames[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Papertrail<span class=\"pl-pds\">&quot;</span></span>], containerImages[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Papertrail<span class=\"pl-pds\">&quot;</span></span>], papertTrailExec,</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L167\" class=\"blob-num js-line-number\" data-line-number=\"167\"></td>\n        <td id=\"file-docker-automation-py-LC167\" class=\"blob-code blob-code-inner js-file-line\">                                         paperTrailArgs)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L168\" class=\"blob-num js-line-number\" data-line-number=\"168\"></td>\n        <td id=\"file-docker-automation-py-LC168\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">else</span>:</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L169\" class=\"blob-num js-line-number\" data-line-number=\"169\"></td>\n        <td id=\"file-docker-automation-py-LC169\" class=\"blob-code blob-code-inner js-file-line\">    niceLogger.log(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Skipping datadog and papertrail for local mode.<span class=\"pl-pds\">&quot;</span></span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L170\" class=\"blob-num js-line-number\" data-line-number=\"170\"></td>\n        <td id=\"file-docker-automation-py-LC170\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L171\" class=\"blob-num js-line-number\" data-line-number=\"171\"></td>\n        <td id=\"file-docker-automation-py-LC171\" class=\"blob-code blob-code-inner js-file-line\">niceLogger.log(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Adding SecretProject1.<span class=\"pl-pds\">&quot;</span></span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L172\" class=\"blob-num js-line-number\" data-line-number=\"172\"></td>\n        <td id=\"file-docker-automation-py-LC172\" class=\"blob-code blob-code-inner js-file-line\">dockerHelper.run_container(containerNames[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>SecretProject1<span class=\"pl-pds\">&quot;</span></span>], containerImages[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>SecretProject1<span class=\"pl-pds\">&quot;</span></span>],</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L173\" class=\"blob-num js-line-number\" data-line-number=\"173\"></td>\n        <td id=\"file-docker-automation-py-LC173\" class=\"blob-code blob-code-inner js-file-line\">                           [<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>--expose<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>5000<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>--env-file<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>SecretProject1-env.list<span class=\"pl-pds\">&quot;</span></span>])</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L174\" class=\"blob-num js-line-number\" data-line-number=\"174\"></td>\n        <td id=\"file-docker-automation-py-LC174\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L175\" class=\"blob-num js-line-number\" data-line-number=\"175\"></td>\n        <td id=\"file-docker-automation-py-LC175\" class=\"blob-code blob-code-inner js-file-line\">niceLogger.log(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Adding Nginx.<span class=\"pl-pds\">&quot;</span></span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L176\" class=\"blob-num js-line-number\" data-line-number=\"176\"></td>\n        <td id=\"file-docker-automation-py-LC176\" class=\"blob-code blob-code-inner js-file-line\">nginxArgs <span class=\"pl-k\">=</span> [<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>-p<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>80:80<span class=\"pl-pds\">&quot;</span></span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L177\" class=\"blob-num js-line-number\" data-line-number=\"177\"></td>\n        <td id=\"file-docker-automation-py-LC177\" class=\"blob-code blob-code-inner js-file-line\">             <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>-p<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>443:443<span class=\"pl-pds\">&quot;</span></span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L178\" class=\"blob-num js-line-number\" data-line-number=\"178\"></td>\n        <td id=\"file-docker-automation-py-LC178\" class=\"blob-code blob-code-inner js-file-line\">             <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>--link<span class=\"pl-pds\">&quot;</span></span>, containerNames[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>SecretProject1<span class=\"pl-pds\">&quot;</span></span>] <span class=\"pl-k\">+</span> <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>:SecretProject1<span class=\"pl-pds\">&quot;</span></span></td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L179\" class=\"blob-num js-line-number\" data-line-number=\"179\"></td>\n        <td id=\"file-docker-automation-py-LC179\" class=\"blob-code blob-code-inner js-file-line\">             ]</td>\n      </tr>\n      <tr>\n        <td id=\"file-docker-automation-py-L180\" class=\"blob-num js-line-number\" data-line-number=\"180\"></td>\n        <td id=\"file-docker-automation-py-LC180\" class=\"blob-code blob-code-inner js-file-line\">dockerHelper.run_container(containerNames[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Nginx<span class=\"pl-pds\">&quot;</span></span>], containerImages[<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Nginx<span class=\"pl-pds\">&quot;</span></span>], nginxArgs)</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/yetanotherchris/84177157d590acdb0614866ff1d1c536/raw/722434e192d3ee7ea0a08cb14d726830582ffa97/docker-automation.py\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/yetanotherchris/84177157d590acdb0614866ff1d1c536#file-docker-automation-py\">docker-automation.py</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>","frontmatter":{"title":"Bash vs Powershell vs Python - Docker automation with Python","date":"September 09, 2016","description":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2016-09-09-bash-vs-powershell-vs-python---docker-automation-with-python/","previous":{"fields":{"slug":"/2016-09-07-running-cron-jobs-inside-a-docker-container/"},"frontmatter":{"title":"Running cron jobs inside a Docker container"}},"next":{"fields":{"slug":"/2016-09-09-podcast-of-the-month---sept-2016/"},"frontmatter":{"title":"Podcast of the month - Sept 2016"}}}}