{"data":{"site":{"siteMetadata":{"title":"Another Chris","author":"Chris Small"}},"markdownRemark":{"id":"b76ab6ef-c1e3-5627-a7f4-6ec0ef70b90b","excerpt":"One of the biggest points earners for me on Stackoverflow has been  this question  about Error logging in C#/.NET. Having been fairly experienced with the setup…","html":"<p>One of the biggest points earners for me on Stackoverflow has been <a href=\"http://stackoverflow.com/questions/147557/error-logging-in-c-sharp/148117\">this question</a> about Error logging in C#/.NET. Having been fairly experienced with the setup of Log4net, I’ve seen firsthand how much over kill it generally is for logging (unless you like to use your live servers for debugging), and also how it just isn’t needed as .NET has its own in built and comprehensive logging framework built in.</p>\n<p>One thing that isn’t mentioned in my answer is how to filter your log messages according to error type: information, error, critical etc. It’s fairly easy to do with TraceListeners, but requires quite a few extra lines of XML in your web.config/app.config. The example below shows how to filter information messages, it’s setup to use the eventlog and write to the ASP.NET category, which is necessary with web apps if the user you are running the app pool with doesn’t have admin access, or the registry key for a new event log source doesn’t exist.</p>\n<p><div id=\"gist4747141\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-gistfile1-xml\" class=\"file\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-xml \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\">\n      <tr>\n        <td id=\"file-gistfile1-xml-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-gistfile1-xml-LC1\" class=\"blob-code blob-code-inner js-file-line\">&lt;<span class=\"pl-ent\">system</span>.diagnostics&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xml-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-gistfile1-xml-LC2\" class=\"blob-code blob-code-inner js-file-line\">\t<span class=\"pl-c\"><span class=\"pl-c\">&lt;!--</span> Add multiple sources for varying levels of tracing <span class=\"pl-c\">--&gt;</span></span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xml-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-gistfile1-xml-LC3\" class=\"blob-code blob-code-inner js-file-line\">\t&lt;<span class=\"pl-ent\">sources</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xml-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-gistfile1-xml-LC4\" class=\"blob-code blob-code-inner js-file-line\">\t\t&lt;<span class=\"pl-ent\">source</span> <span class=\"pl-e\">name</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>debugSource<span class=\"pl-pds\">&quot;</span></span> <span class=\"pl-e\">switchName</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>defaultSwitch<span class=\"pl-pds\">&quot;</span></span> <span class=\"pl-e\">switchType</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>System.Diagnostics.SourceSwitch<span class=\"pl-pds\">&quot;</span></span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xml-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-gistfile1-xml-LC5\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t&lt;<span class=\"pl-ent\">listeners</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xml-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-gistfile1-xml-LC6\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t&lt;<span class=\"pl-ent\">add</span> <span class=\"pl-e\">name</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>eventLogListener<span class=\"pl-pds\">&quot;</span></span> <span class=\"pl-e\">type</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>System.Diagnostics.EventLogTraceListener<span class=\"pl-pds\">&quot;</span></span> <span class=\"pl-e\">initializeData</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>ASP.NET 2.0.50727.0<span class=\"pl-pds\">&quot;</span></span> /&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xml-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-gistfile1-xml-LC7\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t&lt;/<span class=\"pl-ent\">listeners</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xml-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-gistfile1-xml-LC8\" class=\"blob-code blob-code-inner js-file-line\">\t\t&lt;/<span class=\"pl-ent\">source</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xml-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-gistfile1-xml-LC9\" class=\"blob-code blob-code-inner js-file-line\">\t&lt;/<span class=\"pl-ent\">sources</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xml-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-gistfile1-xml-LC10\" class=\"blob-code blob-code-inner js-file-line\">\t&lt;<span class=\"pl-ent\">switches</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xml-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-gistfile1-xml-LC11\" class=\"blob-code blob-code-inner js-file-line\">\t\t&lt;<span class=\"pl-ent\">add</span> <span class=\"pl-e\">name</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>defaultSwitch<span class=\"pl-pds\">&quot;</span></span> <span class=\"pl-e\">value</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Error<span class=\"pl-pds\">&quot;</span></span>/&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xml-L12\" class=\"blob-num js-line-number\" data-line-number=\"12\"></td>\n        <td id=\"file-gistfile1-xml-LC12\" class=\"blob-code blob-code-inner js-file-line\">\t\t<span class=\"pl-c\"><span class=\"pl-c\">&lt;!--</span> See System.Diagnostics.SourceLevels enum <span class=\"pl-c\">--&gt;</span></span></td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xml-L13\" class=\"blob-num js-line-number\" data-line-number=\"13\"></td>\n        <td id=\"file-gistfile1-xml-LC13\" class=\"blob-code blob-code-inner js-file-line\">\t&lt;/<span class=\"pl-ent\">switches</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xml-L14\" class=\"blob-num js-line-number\" data-line-number=\"14\"></td>\n        <td id=\"file-gistfile1-xml-LC14\" class=\"blob-code blob-code-inner js-file-line\">\t&lt;<span class=\"pl-ent\">trace</span> <span class=\"pl-e\">autoflush</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>false<span class=\"pl-pds\">&quot;</span></span> <span class=\"pl-e\">indentsize</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>4<span class=\"pl-pds\">&quot;</span></span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xml-L15\" class=\"blob-num js-line-number\" data-line-number=\"15\"></td>\n        <td id=\"file-gistfile1-xml-LC15\" class=\"blob-code blob-code-inner js-file-line\">\t\t&lt;<span class=\"pl-ent\">listeners</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xml-L16\" class=\"blob-num js-line-number\" data-line-number=\"16\"></td>\n        <td id=\"file-gistfile1-xml-LC16\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t&lt;<span class=\"pl-ent\">add</span> <span class=\"pl-e\">name</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>eventLogListener<span class=\"pl-pds\">&quot;</span></span> <span class=\"pl-e\">type</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>System.Diagnostics.EventLogTraceListener<span class=\"pl-pds\">&quot;</span></span> <span class=\"pl-e\">initializeData</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>ASP.NET 2.0.50727.0<span class=\"pl-pds\">&quot;</span></span> /&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xml-L17\" class=\"blob-num js-line-number\" data-line-number=\"17\"></td>\n        <td id=\"file-gistfile1-xml-LC17\" class=\"blob-code blob-code-inner js-file-line\">\t\t&lt;/<span class=\"pl-ent\">listeners</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xml-L18\" class=\"blob-num js-line-number\" data-line-number=\"18\"></td>\n        <td id=\"file-gistfile1-xml-LC18\" class=\"blob-code blob-code-inner js-file-line\">\t&lt;/<span class=\"pl-ent\">trace</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-gistfile1-xml-L19\" class=\"blob-num js-line-number\" data-line-number=\"19\"></td>\n        <td id=\"file-gistfile1-xml-LC19\" class=\"blob-code blob-code-inner js-file-line\">&lt;/<span class=\"pl-ent\">system</span>.diagnostics&gt;</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/yetanotherchris/4747141/raw/b17b4d62b06b13f349806e6e7ecf557c7eb956f6/gistfile1.xml\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/yetanotherchris/4747141#file-gistfile1-xml\">gistfile1.xml</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div> </p>\n<!--more-->\n<p>You should be using a wrapper/Façade class for the logging so you can have a single entry point and class with one responsibility in your app. Checking for the output level is then easy:</p>\n<pre>private TraceSource _traceSource  = new TraceSource(\"defaultSource\");\n\npublic void LogInformation(string message,object params args)\n{\n\tif ((_traceSource.Switch.Level & SourceLevels.Information) == SourceLevels.Information)\n\t{\n\t\t...\n\t}\n}\n</pre>","frontmatter":{"title":"Filtering System.Diagnostics Trace messages","date":"February 13, 2012","description":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2012-02-13-filtering-system-diagnostics-trace-messages/","previous":{"fields":{"slug":"/2012-02-07-parsing-xfdf-pdf-annotations/"},"frontmatter":{"title":"Parsing XFDF (PDF annotations) in C#"}},"next":{"fields":{"slug":"/2012-03-06-using-team-city-for-staging-and-test-builds-with-asp-net-and-selenium/"},"frontmatter":{"title":"Using Team City for staging and test builds with ASP.NET and Selenium"}}}}